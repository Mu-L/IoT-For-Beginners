# เดเดจเตเดฑเตผเดจเตเดฑเตเดฑ รผzerinden เดจเตเดฑเตเดฑเตโเดฒเตเดฑเตเดฑเต เดจเดฟเดฏเดจเตเดคเตเดฐเดฟเดเตเดเตเด - เดตเดพเดเด IoT เดนเดพเตผเดกเตโเดตเตเดฏเตผ เฎฎเฎฑเฏเฎฑเฏเฎฎเฏ เดฑเดพเดธเตเดฌเตเดฑเดฟ เดชเต

เดชเดพเดเดคเตเดคเดฟเดจเตเดฑเต เด เดญเดพเดเดคเตเดคเดฟเตฝ, เดจเดฟเดเตเดเตพ MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเตฝ เดจเดฟเดจเตเดจเตเดณเตเดณ เดเดฎเดพเตปเดกเตเดเตพ เดจเดฟเดเตเดเดณเตเดเต เดฑเดพเดธเตเดฌเตเดฑเดฟ เดชเตเดฏเดฟเดฒเตเดเตเดเต เดตเดพเดเด IoT เดเดชเดเดฐเดฃเด เดตเดดเดฟเดฏเต เดฒเดญเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเต เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดฏเตเด.

## เดเดฎเดพเตปเดกเตเดเตพเดเตเดเต เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดฏเตเด

เดเดเตเดคเตเดคเดชเดเดฟ MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเตฝ เดจเดฟเดจเตเดจเตเด เดเดฏเดเตเดเตเดจเตเดจ เดเดฎเดพเตปเดกเตเดเตพเดเตเดเต เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดคเต เดเดตเดฏเตเดเตเดเต เดชเตเดฐเดคเดฟเดเดฐเดฟเดเตเดเตเด เดเดจเตเดจเดคเดพเดฃเต.

### เดเดพเดธเตโเดเต

เดเดฎเดพเตปเดกเตเดเตพเดเตเดเต เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดฏเตเด.

1. VS เดเตเดกเดฟเตฝ เดจเตเดฑเตเดฑเตโเดฒเตเดฑเตเดฑเต เดชเตเดฐเตเดเดเตเดฑเตเดฑเต เดคเตเดฑเดเตเดเตเด.

1. เดจเดฟเดเตเดเตพ เดตเดพเดเด IoT เดเดชเดเดฐเดฃเด เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเตเดตเตเดเตเดเดฟเตฝ, เดเตเตผเดฎเดฟเดจเตฝ เดตเดพเดเด เดเดจเตเดคเตผเดฆเตเดฆเตเดถเตเดฏ เดชเดฐเดฟเดธเตเดฅเดฟเดคเดฟเดฏเดฟเตฝ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเตเดฃเตเดเตเดจเตเดจเต เดเดฑเดชเตเดชเดพเดเตเดเตเด. เดฑเดพเดธเตเดฌเตเดฑเดฟ เดชเต เดเดชเดฏเตเดเดฟเดเตเดเดพเตฝ, เดจเดฟเดเตเดเตพเดเตเดเต เดตเดพเดเด เดเดจเตเดคเตผเดฆเตเดฆเตเดถเตเดฏ เดชเดฐเดฟเดธเตเดฅเดฟเดคเดฟ เดเดตเดถเตเดฏเดฎเดฟเดฒเตเดฒ.

1. `client_telemetry_topic` เดจเดฟเตผเดตเดเดจเดคเตเดคเดฟเดจเต เดถเตเดทเด เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```python
    server_command_topic = id + '/commands'
    ```

    `server_command_topic` เดเดจเตเดจเดคเต MQTT เดตเดฟเดทเดฏเดฎเดพเดฃเต; เดเดชเดเดฐเดฃเด LED เดเดฎเดพเตปเดกเตเดเตพ เดธเตเดตเตเดเดฐเดฟเดเตเดเดพเตป เดเดเตเดเตเดเตเดจเตเดจเดคเต.

1. เดชเตเดฐเดงเดพเดจ เดฒเตเดชเตเดชเดฟเดจเต เดฎเตเดเดณเดฟเตฝ, `mqtt_client.loop_start()` เดตเดฐเดฟเดฏเตเดเต เดถเตเดทเดฎเตเดณเตเดณ เดญเดพเดเดคเตเดคเต เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```python
    def handle_command(client, userdata, message):
        payload = json.loads(message.payload.decode())
        print("Message received:", payload)
    
        if payload['led_on']:
            led.on()
        else:
            led.off()
    
    mqtt_client.subscribe(server_command_topic)
    mqtt_client.on_message = handle_command
    ```

    เด เดเตเดกเต `handle_command` เดเดจเตเดจ เดเดฐเต เดซเดเตเดทเตป เดจเดฟเตผเดตเดเดฟเดเตเดเตเดจเตเดจเต, เดเดคเต เดเดฐเต เดธเดจเตเดฆเตเดถเด JSON เดกเตเดเตเดฏเตเดฎเตเดจเตเดฑเดพเดฏเดฟ เดตเดพเดฏเดฟเดเตเดเตเดเดฏเตเด `led_on` เดชเตเดฐเตเดชเตเดชเตผเดเตเดเดฟ เดฎเตเดฒเตเดฏเด เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต. เดเดคเต `True` เดเดฃเตเดเตเดเดฟเตฝ LED เดเตบ เดเตเดฏเตเดฏเตเดจเตเดจเตเดตเตเดฃเด, เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดซเต.

    MQTT เดเตเดฒเดฏเดจเตเดฑเต, เดธเตผเดตเดฑเดฟเดจเต เดเดฏเดเตเดเตเดจเตเดจ เดธเดจเตเดฆเตเดถเดเตเดเตพ เดฒเดญเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเดพเดฏเดฟ เด เดตเดฟเดทเดฏเดคเตเดคเดฟเตฝ เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดฏเตเดเดฏเตเด, เดเดชเตเดชเด เดธเดจเตเดฆเตเดถเด เดฒเดญเดฟเดเตเดเดชเตเดชเตเตพ `handle_command` เดซเดเตเดทเตป เดตเดฟเดณเดฟเดเตเดเตเดจเตเดจเดคเดพเดฏเดฟ เดธเดเตเดเดฎเดพเดเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเดจเตเดจเต.

    > ๐ `on_message` เดนเดพเตปเดกเตเดฒเตผ เดเดฒเตเดฒเดพ เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดค เดตเดฟเดทเดฏเดเตเดเตพเดเตเดเตเด เดตเดฟเดณเดฟเดเตเดเดชเตเดชเตเดเตเดจเตเดจเต. เดจเดฟเดเตเดเตพ เดญเดพเดตเดฟเดฏเดฟเตฝ เดจเดฟเดฐเดตเดงเดฟ เดตเดฟเดทเดฏเดเตเดเดณเดฟเตฝ เดเตเตพเดเตเดเตเดจเตเดจเดคเดฟเดจเต เดเตเดกเต เดเดดเตเดคเตเดเดฏเดพเดฃเตเดเตเดเดฟเตฝ, เดธเดจเตเดฆเตเดถเด เดเดฏเดเตเด เดตเดฟเดทเดฏเดคเตเดคเต `message` เดเดฌเตเดเดเตเดฑเตเดฑเดฟเตฝ เดจเดฟเดจเตเดจเต เดธเตเดตเตเดเดฐเดฟเดเตเดเดพเดตเตเดจเตเดจเดคเดพเดฃเต.

1. เดฎเตเตปโเดชเต เดญเดพเดเดคเตเดคเตเดณเตเดณ เดเดธเตเตปเดฎเตเดจเตเดฑเต เดชเตเดฒเต เดคเดจเตเดจเต เดเตเดกเต เดชเตเดฐเดตเตผเดคเตเดคเดฟเดชเตเดชเดฟเดเตเดเตเด. เดจเดฟเดเตเดเตพ เดตเดพเดเด IoT เดเดชเดเดฐเดฃเด เดเดชเดฏเตเดเดฟเดเตเดเดพเตฝ, CounterFit เดเดชเตเดชเต เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเตเดฃเตเดเตเดจเตเดจเต เดเดฑเดชเตเดชเดพเดเตเดเตเดเดฏเตเด เดฒเตเดฑเตเดฑเต เดธเตเตปเดธเตผ, LED เดถเดฐเดฟเดฏเดพเดฏ เดชเดฟเดจเตเดเดณเดฟเตฝ เดธเตเดทเตโเดเดฟเดเตเดเดฟเดเตเดเตเดฃเตเดเตเดจเตเดจเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเด.

1. เดจเดฟเดเตเดเดณเตเดเต เดญเตเดคเดฟเดเดฎเต เดตเดพเดเดเดฎเต เดเดชเดเดฐเดฃเด เดเดฃเตเดเตเดคเตเดคเตเดจเตเดจ เดฒเตเดฑเตเดฑเต เดจเดฟเดฒเด เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเตเด. เดธเดจเตเดฆเตเดถเดเตเดเตพ เดธเตเดตเตเดเดฐเดฟเดเตเดเตเดเดฏเตเด เดเดฎเดพเตปเดกเตเดเตพ เดเดฏเดฏเตเดเตเดเตเดเดฏเตเด เดเตเตผเดฎเดฟเดจเดฒเดฟเตฝ เดฐเตเดเดชเตเดชเตเดเตเดคเตเดคเตเดเดฏเตเด เดเตเดฏเตเดฏเตเด. เดฒเตเดฑเตเดฑเต เดจเดฟเดฒเดชเตเดฐเดเดพเดฐเด LED เดเตบ-เดเดซเต เดเตเดฏเตเดฏเตเด.

> ๐ เด เดเตเดกเต เดจเดฟเดเตเดเตพเดเตเดเต [code-commands/virtual-device](../../../../../1-getting-started/lessons/4-connect-internet/code-commands/virtual-device) เดซเตเตพเดกเดฑเดฟเตฝ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ [code-commands/pi](../../../../../1-getting-started/lessons/4-connect-internet/code-commands/pi) เดซเตเตพเดกเดฑเดฟเตฝ เดจเตเดเดพเด.

๐ เดจเดฟเดเตเดเตพ MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเตฝ เดจเดฟเดจเตเดจเตเดณเตเดณ เดเดฎเดพเตปเดกเตเดเตพเดเตเดเต เดชเตเดฐเดคเดฟเดเดฐเดฟเดเตเดเดพเตป เดจเดฟเดเตเดเดณเตเดเต เดเดชเดเดฐเดฃเด เดตเดฟเดเดฏเดเดฐเดฎเดพเดฏเดฟ เดเตเดกเตเดเตเดฏเตเดคเดฟเดฐเดฟเดเตเดเตเดจเตเดจเต.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**เดเดธเดฐเดฟเดชเตเดชเดพเดเต**:  
เด เดฐเตเด เด เดเด เดเตเดฐเดพเตปเดธเตเดฒเตเดทเตป เดธเตเดตเดจเดฎเดพเดฏ [เดเต-เดเดชเตเดชเต เดเตเดฐเดพเตปเดธเตเดฒเตเดฑเตเดฑเตผ](https://github.com/Azure/co-op-translator) เดเดชเดฏเตเดเดฟเดเตเดเต เดชเดฐเดฟเดญเดพเดทเดชเตเดชเตเดเตเดคเตเดคเดฟเดฏเดคเดพเดฃเต. เดจเดฟเดเตเฒขเดคเดฏเดฟเดฒเตเดเตเดเต เดถเตเดฐเดฎเดฟเดเตเดเตเดเตเดเดฟเดฒเตเด, เดฏเดพเดจเตเดคเตเดฐเดฟเด เดคเตผเดเตเดเดฎเดเดณเดฟเตฝ เดเดชเตเตผเดตเดฎเดพเดฏ เดญเดพเดทเดพเดชเดฟเดดเดตเตเดเตพ เดเดฃเตเดเดพเดเดพเดฎเตเดจเตเดจเต เดถเตเดฐเดฆเตเดงเดฟเดเตเดเตเด. เดฎเตเดฒเดฟเด เดฐเตเด เดเดคเดฟเดจเตเดฑเต เดเดจเตเดฎเดญเดพเดทเดฏเดฟเดฒเตเดณเตเดณ เดฐเตเดชเด เดจเดฟเดเตเดขเดฎเดพเดฏ เดธเตเดฐเตเดคเดธเดพเดฏเดฟ เดเดฃเดเตเดเดพเดเตเดเดชเตเดชเตเดเดฃเด. เดจเดฟเตผโเดฃเดพเดฏเด เดตเดฟเดตเดฐเดเตเดเตพเดเตเดเต, เดชเตเดฐเตเดซเดทเดฃเตฝ เดฎเดพเดจเดต เดเตเดฐเดพเตปเดธเตเดฒเตเดทเตป เดจเดฟเตผเดฆเตเดฆเตเดถเดฟเดเตเดเตเดจเตเดจเต. เด เดคเตผเดเตเดเดฎ เดเดชเดฏเตเดเดคเตเดคเดฟเตฝ เดจเดฟเดจเตเดจเตเดฃเตเดเดพเดเตเดจเตเดจ เดคเตเดฑเตเดฑเดฟเดฆเตเดงเดพเดฐเดฃเดเตพเดเตเดเต เฆญเงเฆฒเดตเดฟเดตเตผเดคเตเดคเดจเดเตเดเตพเดเตเดเต เดเดเตเดเตพ เดเดคเตเดคเดฐเดตเดพเดฆเดฟเดเดณเดฒเตเดฒ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->