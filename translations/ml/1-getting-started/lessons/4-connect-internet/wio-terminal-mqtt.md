# เดเดจเตเดฑเตผเดจเตเดฑเตเดฑเดฟเดฒเตเดเต เดจเดฟเดเตเดเดณเตเดเต เดจเตเดฑเตเดฑเต เดฒเตเดฑเตเดฑเต เดจเดฟเดฏเดจเตเดคเตเดฐเดฟเดเตเดเตเด - Wio เดเตเตผเดฎเดฟเดจเตฝ

IoT เดกเดฟเดตเตเดธเดฟเดจเต *test.mosquitto.org* เดเดชเดฏเตเดเดฟเดเตเดเต MQTT เดตเดดเดฟ เดฒเตเดฑเตเดฑเต เดธเตเตปเดธเตผ เดตเดพเดฏเดจเดเดณเดฟเตฝ เดจเดฟเดจเตเดจเตเดณเตเดณ เดเตเดฒเดฟเดฎเตเดเตเดฐเดฟ เดฎเตเดฒเตเดฏเดเตเดเตพ เดเดฏเดฏเตเดเตเดเดพเดจเตเด LED เดจเดฟเดฏเดจเตเดคเตเดฐเดฟเดเตเดเดพเตป เดเดฎเดพเตปเดกเตเดเตพ เดธเตเดตเตเดเดฐเดฟเดเตเดเดพเดจเตเด เดเตเดกเตเดเตเดฏเตเดฏเดพเตป เดเดตเดถเตเดฏเดฎเดพเดฃเต.

เดชเดพเดเดคเตเดคเดฟเดจเตเดฑเต เด เดญเดพเดเดคเตเดคเดฟเตฝ, เดจเดฟเดเตเดเตพ เดจเดฟเดเตเดเดณเตเดเต Wio เดเตเตผเดฎเดฟเดจเตฝ MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด.

## WiFi, MQTT Arduino เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเด

MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฎเตเดฏเตเดฃเดฟเดเตเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดพเตป, Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเต WiFi เดเดฟเดชเตเดชเดฟเดจเต เดเดชเดฏเตเดเดฟเดเตเดเต MQTT เดเดฎเตเดฎเตเดฏเตเดฃเดฟเดเตเดเตเดทเตป เดจเดเดคเตเดคเดพเตป Arduino เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเดฃเตเดเดคเตเดฃเตเดเต. Arduino เดกเดฟเดตเตเดธเตเดเตพเดเตเดเตเดณเตเดณ เดตเดฟเดเดธเดจเดคเตเดคเดฟเตฝ, เดจเดฟเดเตเดเตพเดเตเดเต เดตเดฟเดชเตเดฒเดฎเดพเดฏ เดชเตเดคเต เดธเตเดดเตเดธเต เดเตเดกเต เดเดเดเตเดเดฟเดฏ เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเดพเด, เดเดต เดตเตป เดคเตเดคเดฟเดฒเตเดณเตเดณ เดเดดเดฟเดตเตเดเตพ เดจเดเดชเตเดชเดฟเดฒเดพเดเตเดเตเดจเตเดจเต. Seeed Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดจเต WiFi เดตเดดเดฟ เดเดฎเตเดฏเตเดฃเดฟเดเตเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดพเตป เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดชเตเดฐเดธเดฟเดฆเตเดงเตเดเดฐเดฟเดเตเดเต. เดฎเดฑเตเดฑเต เดกเดตเดฒเดชเตเดชเตผเดฎเดพเตผ MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดเดณเตเดฎเดพเดฏเดฟ เดเดฎเตเดฏเตเดฃเดฟเดเตเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดพเดจเตเดณเตเดณ เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดชเตเดฐเดธเดฟเดฆเตเดงเตเดเดฐเดฟเดเตเดเดฟเดเตเดเตเดฃเตเดเต, เดจเดฟเดเตเดเตพ เดจเดฟเดเตเดเดณเตเดเต เดกเดฟเดตเตเดธเตเดฎเดพเดฏเดฟ เดเดต เดเดชเดฏเตเดเดฟเดเตเดเตเด.

เด เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดธเตเดดเตโเดธเต เดเตเดกเดพเดฏเดฟ เดจเตฝเดเตเดจเตเดจเต, เดเดต PlatformIO-เดฏเดฟเตฝ เดธเตเดตเดฏเดฎเตเดต เดเดฎเตเดชเตเตผเดเตเดเต เดเตเดฏเตเดคเต เดจเดฟเดเตเดเดณเตเดเต เดกเดฟเดตเตเดธเดฟเดจเต เดเดฎเตเดชเตเตฝ เดเตเดฏเตเดฏเดพเดตเตเดจเตเดจเดคเดพเดฃเต. เดเดคเตเดคเดฐเด Arduino เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ Arduino เดซเตเดฐเตเดฏเดฟเดเดตเตผเดเตเดเต เดชเดฟเดจเตเดคเตเดฃเดฏเตเดณเตเดณ เดเดคเตเดฐเต เดกเดฟเดตเตเดธเดฟเดฒเตเด เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเด, เดฒุงุฆุจเตเดฐเดฑเดฟเดฏเตเดเตเดเต เดตเตเดฃเตเด เดชเตเดฐเดคเตเดฏเตเด เดนเดพเตผเดกเตโเดตเตเดฏเตผ เดกเดฟเดตเตเดธเดฟเดจเต เดเดฃเตเดเดพเดฏเดฟเดฐเดฟเดเตเดเดฃเด เดเดจเตเดจเตเดตเดเตเดเต. เดเดฟเดฒ เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ, Seeed WiFi เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดชเตเดฒเตเดณเตเดณเดต, เดชเตเดฐเดคเตเดฏเตเด เดนเดพเตผเดกเตโเดตเตเดฏเดฑเดฟเดจเดพเดฃเต.

เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตเดฒเตเดฌเตฝ เดเดฏเดฟ เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเดพเดจเต เฎคเฏเฎตเดฏเตเดฃเตเดเตเดเตเดเดฟเตฝ เดเดฎเตเดชเตเตฝ เดเตเดฏเตเดฏเดพเดจเต เดชเดเดฐเด เดเดฐเต เดชเตเดฐเดคเตเดฏเตเด เดชเตเดฐเตเดเดเตเดเดฟเดฒเตเดเตเดเต เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเดพเดจเต เดเดดเดฟเดฏเตเด. เด เดเดธเตเดจเตเดฎเตเดจเตเดฑเดฟเดจเดพเดฏเดฟ เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดชเตเดฐเตเดเดเตเดเดฟเดฒเตเดเตเดเต เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเด.

โ [PlatformIO เดฒเตเดฌเตเดฐเดฑเดฟ เดฎเดพเดจเตเดเตเดฎเตเดจเตเดฑเต เดกเตเดเตเดฏเตเดฎเตเดจเตเดฑเตเดทเตป](https://docs.platformio.org/en/latest/librarymanager/index.html) เตฝ เดจเดฟเดเตเดเตพเดเตเดเต เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเดฃเตเดเตเดคเตเดคเดพเดจเตเด เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเดพเดจเตเด ๊ดํ เดเตเดเตเดคเตฝ เดเดฑเดฟเดฏเดพเตป เดเดดเดฟเดฏเตเด.

### เดเดพเดธเตเดเต - WiFi, MQTT Arduino เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเด

Arduino เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเด.

1. VS เดเตเดกเดฟเตฝ เดจเตเดฑเตเดฑเต เดฒเตเดฑเตเดฑเต เดชเตเดฐเตเดเดเตเดเต เดคเตเดฑเดเตเดเตเด.

1. `platformio.ini` เดซเดฏเดฒเดฟเดจเตเดฑเต เดเดตเดธเดพเดจเด เดคเดพเดดเต เดเดพเดฃเดฟเดเตเดเดฟเดฐเดฟเดเตเดเตเดจเตเดจเดคเต เดเตเตผเดเตเดเตเด:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```
  
    เดเดคเต Seeed WiFi เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเดเดชเตเตผเดเตเดเต เดเตเดฏเตเดฏเตเดจเตเดจเต. `@ <number>` เดธเดฟเดจเตเดเดพเดเตเดธเต เดฒเตเดฌเตเดฐเดฑเดฟเดฏเตเดเต เดเดฐเต เดชเตเดฐเดคเตเดฏเตเด เดชเดคเดฟเดชเตเดชเดฟเดจเตเดฏเดพเดฃเต เดธเตเดเดฟเดชเตเดชเดฟเดเตเดเตเดจเตเดจเดคเต.

    > ๐ `@ <number>` เดจเตเดเตเดเด เดเตเดฏเตเดคเต เดฒเตเดฌเตเดฐเดฑเดฟเดเดณเตเดเต เดชเตเดคเดฟเดฏ เดชเดคเดฟเดชเตเดชเตเดเตพ เดเดฒเตเดฒเดพเดฏเตเดชเตเดชเตเดดเตเด เดเดชเดฏเตเดเดฟเดเตเดเดพเด, เดชเดเตเดทเต เดคเดพเดดเต เดเตเดเตเดคเตเดค เดเตเดกเดฟเตฝ เดชเตเดคเดฟเดฏ เดชเดคเดฟเดชเตเดชเตเดเตพ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดฎเตเดจเตเดจ เดเดฑเดชเตเดชเต เดเดฒเตเดฒ. เดเตเดเตเดคเตเดคเดฟเดฐเดฟเดเตเดเตเดจเตเดจ เดชเดคเดฟเดชเตเดชเดฟเตฝ เดเตเดกเต เดเตเดธเตเดฑเตเดฑเต เดเตเดฏเตเดคเดฟเดเตเดเตเดฃเตเดเต.

    เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตเตผเดเตเดเดพเตป เดเดคเตเดชเตเดฑเด เดเตเดฏเตเดฏเตเดฃเตเดเดคเตเดฃเตเดเต. เดเดเตเดคเตเดค เดคเดตเดฃ PlatformIO เดชเตเดฐเตเดเดเตเดเต เดจเดฟเตผเดฎเตเดฎเดฟเดเตเดเตเดฎเตเดชเตเตพ เด เดฒเตเดฌเตเดฐเดฑเดฟเดเดณเตเดเต เดธเตเดดเตโเดธเต เดเตเดกเต เดกเตเตบเดฒเตเดกเต เดเตเดฏเตเดคเต เดชเตเดฐเตเดเดเตเดเดฟเดฒเตเดฏเตเดเตเดเต เดเดฎเตเดชเตเตฝ เดเตเดฏเตเดฏเตเด.

1. `lib_deps` เดธแแฅเตเดทเดจเดฟเดฒเตเดเตเดเต เดคเดพเดดเต เดเตเตผเดเตเดเตเด:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```
  
    เดเดคเต [PubSubClient](https://github.com/knolleary/pubsubclient), Arduino MQTT เดเตเดฒเดฏเดจเตเดฑเต เดเดเดชเตเตผเดเตเดเต เดเตเดฏเตเดฏเตเดจเตเดจเต.

## WiFi-เดฏเดฟเตฝ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด

เดเดชเตเดชเตเตพ Wio เดเตเตผเดฎเดฟเดจเตฝ WiFi-เดฏเดฟเตฝ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเดพเด.

### เดเดพเดธเตเดเต - WiFi-เดฟเตฝ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด

Wio เดเตเตผเดฎเดฟเดจเตฝ WiFi-เดฏเดฟเตฝ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด.

1. `src` เดซเตเตพเดกเดฑเดฟเตฝ `config.h` เดเดจเตเดจ เดชเตเดคเดฟเดฏ เดซเดฏเตฝ เดธเตเดทเตเดเดฟเดเตเดเตเด. เดเดคเต เดเตเดฏเตเดฏเดพเตป, `src` เดซเตเตพเดกเตผ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดคเดฟเดจเตเดณเตเดณเดฟเดฒเต `main.cpp` เดซเดฏเตฝ เดคเดฟเดฐเดเตเดเตเดเตเดเตเดเตเดเดฏเตเด เดเดเตเดธเตเดชเตเดฒเตเดฑเดฑเดฟเดฒเต **New file** เดฌเดเตเดเตบ เดเตเดฒเดฟเดเตเดเต เดเตเดฏเตเดฏเตเดเดฏเตเด เดเตเดฏเตเดฏเดพเด. เดเดต เดจเดฟเดเตเดเดณเตเดเต เดเตผเดธเตผ เดเดเตเดธเตเดชเตเดฒเตเดฑเดฑเดฟเดจเตเดฎเตเตฝ เดชเดพเตผเดเตเดเตเดเตเดฏเตเดฏเตเดฎเตเดชเตเดดเดพเดฃเต เดเดพเดฃเตเด.

    ![The new file button](../../../../../translated_images/ml/vscode-new-file-button.182702340fe6723c.webp)

1. เด เดซเดฏเดฒเดฟเดฒเตเดเตเดเต เดคเดพเดดเต เดเตเดคเตเดฏเดฎเดพเดฏ เดเตเดกเต เดเตเตผเดเตเดเตเด, WiFi เดเตเดฐเตเดกเตปเดทเตเดฏเตฝ เดจเดฟเตผเดตเดเดฟเดเตเดเดพเตป:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // เดตเตเดซเต เดธเดพเดเตเดทเตเดฏเดชเดคเตเดฐเดเตเดเตพ
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```
  
    `<SSID>` เดเดจเตเดจเดคเต เดจเดฟเดเตเดเดณเตเดเต WiFi SSID เดเดฏเดฟ เดฎเดพเดฑเตเดฑเตเด. `<PASSWORD>` เดเดจเตเดจเดคเต เดจเดฟเดเตเดเดณเตเดเต WiFi เดชเดพเดธเตเดตเตเดกเต เดเดฏเดฟ เดฎเดพเดฑเตเดฑเตเด.

1. `main.cpp` เดซเดฏเตฝ เดคเตเดฑเดเตเดเตเด

1. เดซเดฏเดฒเดฟเดจเตเดฑเต เดฎเตเดเดณเดฟเดฒเดพเดฏเดฟ เดคเดพเดดเต เดเดพเดฃเดฟเดเตเดเดฟเดฐเดฟเดเตเดเตเดจเตเดจ `#include` เดกเดฏเดฑเดเตเดเตเดตเตเดเตพ เดเตเตผเดเตเดเตเด:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```
  
    เดเดคเตเดตเดดเดฟ เดจเดฟเดเตเดเตพ เดฎเตเดฎเตเดชเต เดเตเตผเดคเตเดค เดฒเตเดฌเตเดฐเดฑเดฟเดเตพเดเตเดเตเด, config เดนเตเดกเตผ เดซเดฏเดฒเดฟเดจเตเด เดตเตเดฃเตเด เดนเตเดกเตผ เดซเดฏเดฒเตเดเตพ เดเตพเดเตเดเตเดณเตเดณเดฟเดเตเดเดฟเดฐเดฟเดเตเดเตเดจเตเดจเต. PlatformIO เด เดฒเตเดฌเตเดฐเดฑเดฟเดเดณเตเดเต เดเตเดกเต เดตเดจเตเดจเดคเดฟเดจเต เดเดต เดเดตเดถเตเดฏเดฎเดพเดฃเต. เดเดต เดจเตฝเดเดฟเดฏเดฟเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดฟเดฒ เดเตเดกเต เดเดฎเตเดชเตเตฝ เดเตเดฏเตเดฏเดฟเดฒเตเดฒ, เดเดจเตเดจเดฟเดเตเดเต เดเตเดฎเตเดชเตเดฒเตผ เดชเดฟเดดเดตเตเดเตพ เดเดฃเตเดเดพเดเตเด.

1. `setup` เดซเดเตเดทเดจเดฟเดจเตเดฑเต เดฎเตเดเตพเดญเดพเดเดคเตเดคเต เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจเดคเตเดชเตเดฒเต เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```
  
    WiFi-hez เดเดฃเดเตเดเต เดเดเดพเดคเต dispositivo เดเดจเตเดจเตเด เดเตเดฏเตเดฏเดพเดคเต เดเดพเดคเตเดคเดฟเดฐเดฟเดเตเดเตเดจเตเดจเต, config เดนเตเดกเตผ เดซเดฏเดฒเดฟเตฝ เดเดเตเดคเตเดค SSID, เดชเดพเดธเตเดตเตเดกเต เดเดชเดฏเตเดเดฟเดเตเดเต เดเดฃเดเตเดเต เดเตเดฏเตเดฏเดพเตป เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเต.

1. `setup` เดซเดเตเดทเดจเดฟเดจเตเดฑเต เดเดตเดธเดพเดจเดคเตเดคเต, เดชเดฟเดจเตเดเตพ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดคเดฟเดจเต เดถเตเดทเด เด เดซเดเตเดทเตป เดตเดฟเดณเดฟเดเตเดเตเด.

    ```cpp
    connectWiFi();
    ```
  
1. เด เดเตเดกเต เดจเดฟเดเตเดเดณเตเดเต เดกเดฟเดตเตเดธเดฟเดฒเตเดเตเดเต เดเดชเตโเดฒเตเดกเต เดเตเดฏเตเดคเต WiFi เดเดฃเดเตเดทเตป เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเดคเดพเดฏเดฟ เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด. เดธเตเดฑเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเดฑเดฟเตฝ เดเดคเต เดเดพเดฃเดพเดตเตเดจเตเดจเดคเดพเดฃเต.

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```
  
## MQTT-เดฏเตเดเต เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด

Wio เดเตเตผเดฎเดฟเดจเตฝ WiFi-เดฏเดฟเตฝ เดเดฃเดเตเดเต เดเตเดฏเตเดค เดถเตเดทเด, MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเดพเด.

### เดเดพเดธเตเดเต - MQTT-เดฏเดฟเตฝ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด

MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเด.

1. `config.h` เดซเดฏเดฒเดฟเดจเตเดฑเต เดเดตเดธเดพเดจเด MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเดจเตเดฑเต เดเดฃเดเตเดทเตป เดตเดฟเดถเดฆเดพเดเดถเดเตเดเตพ เดจเดฟเตผเดตเดเดฟเดเตเดเดพเตป เดคเดพเดดเต เดเตเตผเดเตเดเตเด:

    ```cpp
    // MQTT เดเตเดฐเดฎเตเดเดฐเดฃเดเตเดเตพ
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```
  
    `<ID>` เดเดจเตเดจเดคเต เด เดกเดฟเดตเตเดธเต เดเตเดฒเดฏเดจเตเดฑเดฟเดจเตเดฑเต เดฏเฅเคจเคฟเคเดพเดฏ ID เดเดฏเดฟ เดฎเดพเดฑเตเดฑเตเด, เดชเดฟเดจเตเดจเตเดเต เด เดกเดฟเดตเตเดธเต เดชเตเดฐเดธเดฟเดฆเตเดงเตเดเดฐเดฟเดเตเดเตเดจเตเดจเดฏเตเด เดธเดฌเตเดธเตเดเตเดฌเต เดเตเดฏเตเดฏเตเดจเตเดจเดเดตเตเด เดตเดฟเดทเดฏเดเตเดเตพเดเตเดเตเด เดเดคเต เดเดชเดฏเตเดเดฟเดเตเดเตเด. *test.mosquitto.org* เดฌเตเดฐเตเดเตเดเตผ เดชเตเดคเต เดเดฃเต, เดชเดฒเดฐเตเด, เด เดเดธเตเดจเตเดฎเตเดจเตเดฑเต เดเตเดฏเตเดฏเตเดเดฏเตเดณเตเดณ เดฎเดฑเตเดฑเต เดตเดฟเดฆเตเดฏเดพเตผเดคเตเดฅเดฟเดเตพ เดเตพเดชเตเดชเตเดเต, เดเดคเต เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเต. MQTT เดเตเดฒเดฏเดเดฑเดฟเดจเตเดฑเตเดฏเตเด เดตเดฟเดทเดฏเดเดเดณเตเด เดฏเตเดฃเดฟเดเต เดเดฏเดฟเดฐเดฟเดเตเดเดฃเด เดเตเดเดพเดคเต เดฎเดฑเตเดฑเตเดณเตเดณเดตเดฐเตเดฎเดพเดฏเดฟ เดเตเดกเต เดเตเดเตเดเดฟเดเตเดเตเดพเดชเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเตเดณเตเดณ เดเดชเดเดเด เดเดดเดฟเดตเดพเดเตเดเดพเตป. เด เดเดธเตเดจเตเดฎเตเดจเตเดฑเดฟเตฝ เดธเตผเดตเตผ เดเตเดกเต เดเดฐเตเดเตเดเตเดฎเตเดชเตเตพ เด ID เดเดตเดถเตเดฏเดฎเดพเดฃเต.

    > ๐ [GUIDGen](https://www.guidgen.com) เดชเตเดฒเตเดณเตเดณ เดตเตเดฌเตเดธเตเดฑเตเดฑเต เดเดชเดฏเตเดเดฟเดเตเดเต เดฏเตเดฃเดฟเดเต ID เดธเตเดทเตเดเดฟเดเตเดเดพเดตเตเดจเตเดจเดคเดพเดฃเต.

    `BROKER` MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเดจเตเดฑเต URL เดเดฃเต.

    `CLIENT_NAME` เด MQTT เดเตเดฒเดฏเดจเตเดฑเดฟเดจเตเดณเตเดณ เดฏเตเดฃเดฟเดเต เดชเตเดฐเดพเดฃเต เดฌเตเดฐเตเดเตเดเดฑเดฟเตฝ.

1. `main.cpp` เดซเดฏเตฝ เดคเตเดฑเดจเตเดจเต, `connectWiFi` เดซเดเตเดทเดจเดฟเดจเตเดฑเต เดคเดพเดดเต, `setup` เดซเดเตเดทเดจเดฟเดจเต เดฎเตเดเดณเดฟเตฝ เดคเดพเดดเต เดเตเดฏเตเดเตเดเต เดเตเดฏเตเดฏเตเด:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```
  
    Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดจเตเดฑเต WiFi เดฒเตเดฌเตเดฐเดฑเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเต WiFi เดเตเดฒเดฏเดจเตเดฑเต เดธเตเดทเตเดเดฟเดเตเดเตเดจเตเดจเต, เดเดคเตเดชเดฏเตเดเดฟเดเตเดเต MQTT เดเตเดฒเดฏเดจเตเดฑเต เดธเตเดทเตเดเดฟเดเตเดเตเดจเตเดจเต.

1. เด เดเตเดกเดฟเดจเต เดคเดพเดดเต เดเตเตผเดเตเดเตเด:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```
  
    MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดทเตป เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดเดฏเตเด เดฌเดจเตเดงเดฎเดฟเดฒเตเดฒเตเดเตเดเดฟเตฝ เดชเตเดจเดเดธเตเดทเตเดเดฟเดเตเดเตเดเดฏเตเด เด เดซเดเตเดทเตป เดเตเดฏเตเดฏเตเดจเตเดจเตเดฃเตเดเต. เดเดฃเดเตเดเต เดเดเดพเดคเตเดคเดคเดฟเดจเดพเตฝ เดคเตเดเตผเดเตเดเดฏเดพเดฏเดฟ เดฒเตเดชเตเดชเต เดเตเดฏเตเดคเต config เดนเตเดกเดฑเดฟเตฝ เดจเดฟเตผเดตเดเดฟเดเตเด เดฏเตเดฃเดฟเดเต เดเตเดฒเดฏเดจเตเดฑเต เดจเดพเดฎเด เดเดชเดฏเตเดเดฟเดเตเดเต เดเดฃเดเตเดทเตป เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเต.

    เดเดฃเดเตเดทเตป เดชเดฐเดพเดเดฏเดชเตเดชเตเดเตเดจเตเดจเดชเดเตเดทเด 5 เดธเตเดเตเดเดจเตเดฑเดฟเดจเต เดถเตเดทเด เดตเตเดฃเตเดเตเด เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเต.

1. `reconnectMQTTClient` เดซเดเตเดทเดจเดฟเดจเต เดคเดพเดดเต เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```
  
    MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเดจเต เดธเตเดฑเตเดฑเต เดเตเดฏเตเดคเต, เดธเดจเตเดฆเตเดถเด เดเดคเตเดคเดฟเดฏเดชเตเดชเตเตพ เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจ เดเตเตพเดฌเดพเดเตเดเต เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเตเดเดฏเตเด, เดชเดฟเดจเตเดจเตเดเต เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดเต เดเตเดฏเตเดฏเดพเตป เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเต.

1. WiFi เดเดฃเดเตเดเต เดเดดเดฟเดเตเดเต, `setup` เดซเดเตเดทเดจเดฟเตฝ `createMQTTClient` เดซเดเตเดทเตป เดตเดฟเดณเดฟเดเตเดเตเด.

1. เดฎเตเดดเตเดตเตป `loop` เดซเดเตเดทเตป เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเดฟเตฝ เดฎเดพเดฑเตเดฑเตเด:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```
  
    MQTT เดฌเตเดฐเตเดเตเดเดฑเดฟเดฒเตเดเตเดเต เดชเตเดจเดเดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเดจเตเดจเดคเต เดคเตเดเดเตเดเดคเตเดคเดฟเดฒเดพเดฃเต. เด เดเดฃเดเตเดทเดจเตเดเตพ เดเดณเตเดชเตเดชเด เดคเดเดฐเดพเดฑเดฟเดฒเดพเดเดพเตป เดธเดพเดงเตเดฏเดคเดฏเตเดฃเตเดเต, เดเดคเตเดเตเดฃเตเดเต เดธเตเดฅเดฟเดฐเด เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเต เดชเตเดจเดเดเดฃเดเตเดเต เดเตเดฏเตเดฏเตเดจเตเดจเดคเต เดเดคเตเดคเดฎเด. เดคเตเดเตผเดจเตเดจเต MQTT เดเตเดฒเดฏเดจเตเดฑเดฟเดจเตเดฑเต `loop` เดฎเตเดฅเดกเต เดตเดฟเดณเดฟเดเตเดเต เดธเดฌเตเดธเตเดเตเดฐเตเดฌเต เดเตเดฏเตเดค เดตเดฟเดทเดฏเดเตเดเดณเดฟเตฝ เดตเดฐเตเดจเตเดจ เดธเดจเตเดฆเตเดถเดเตเดเตพ เดชเตเดฐเตเดธเดธเต เดเตเดฏเตเดฏเตเดจเตเดจเต. เด เดเดชเตเดชเต เดธเดฟเดเดเดฟเดณเต เดคเตเดฐเตเดกเดพเดฃเต, เดเดคเดฟเดจเดพเตฝ เดชเดถเตเดเดพเดคเตเดคเดฒ เดคเตเดฐเตเดกเดฟเตฝ เดธเดจเตเดฆเตเดถเดเตเดเตพ เดธเตเดตเตเดเดฐเดฟเดเตเดเดพเตป เดเดดเดฟเดฏเดฟเดฒเตเดฒ, เดเดคเดฟเดจเดพเตฝ เดชเตเดฐเดงเดพเดจ เดคเตเดฐเตเดกเดฟเตฝ เดธเดฎเดฏเด เดฎเดพเดฑเตเดฑเดฟ เดธเดจเตเดฆเตเดถเดเตเดเตพ เดชเตเดฐเตเดธเดธเต เดเตเดฏเตเดฏเตเดฃเตเดเดคเตเดฃเตเดเต.

    เดเดตเดธเดพเดจเด 2 เดธเตเดเตเดเดจเตเดฑเต เดตเตเดเดฟเดชเตเดชเดฟเดเตเดเตเดจเตเดจเดคเต เดฒเตเดฑเตเดฑเต เดกเดพเดฑเตเดฑ เดเตเดเตเดคเตฝ เดชเตเดฐเดฏเดพเดธเด เดเตเดเดพเดคเต เดเดฏเดเตเดเดพเดคเดฟเดฐเดฟเดเตเดเดพเดจเตเด เดกเดฟเดตเตเดธเดฟเดจเตเดฑเต เดตเตเดฆเตเดฏเตเดคเดฟ เดเตเดฒเดตเต เดเตเดฑเดเตเดเดพเดจเตเด เดธเดนเดพเดฏเดฟเดเตเดเตเด.

1. เด เดเตเดกเต เดจเดฟเดเตเดเดณเตเดเต Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเตเดเตเดเต เดเดชเตโเดฒเตเดกเต เดเตเดฏเตเดคเต, เดธเตเดฑเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเตผ เดเดชเดฏเตเดเดฟเดเตเดเต WiFi, MQTT-เดฏเดฟเดฒเตเดเตเดเต เดเดฃเดเตเดเต เดเดเตเดจเตเดจเดคเต เดเดพเดฃเตเด.

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```
  
> ๐ เด เดเตเดกเต [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) เดซเตเตพเดกเดฑเดฟเตฝ เดเดฃเตเดเตเดคเตเดคเดพเด.

๐ เดจเดฟเดเตเดเตพ เดตเดฟเดเดฏเดเดฐเดฎเดพเดฏเดฟ เดจเดฟเดเตเดเดณเตเดเต เดกเดฟเดตเตเดธเต MQTT เดฌเตเดฐเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดฌเดจเตเดงเดฟเดชเตเดชเดฟเดเตเดเต.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**เดเดธเดพเดงเดพเดฑเดฃเด**:
เด เดฐเตเด เด.เด. เดคเตผเดเตเดเดฎเดพ เดธเตเดตเดจเด [Co-op Translator](https://github.com/Azure/co-op-translator) เดเดชเดฏเตเดเดฟเดเตเดเต เดเดจเตเดตเดฆเดฟเดเตเดเดฟเดฐเดฟเดเตเดเตเดจเตเดจเดคเดพเดฃเต. เดเตเดคเตเดฏเดคเดฏเตเดเตเดเต เดเดเตเดเตพ เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเตเดตเตเดเตเดเดฟเดฒเตเด, เดฏเดพเดจเตเดคเตเดฐเดฟเด เดคเตผเดเตเดเดฎเดเดณเดฟเตฝ เดชเดฟเดดเดตเตเดเตพ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดเตเดเดเดเตเด เดคเตเดฑเตเดฑเตเดเตพ เดเดฃเตเดเดพเดฏเดฟเดฐเดฟเดเตเดเดพเดฎเตเดจเตเดจเต เดฆเดฏเดตเดพเดฏเดฟ เดถเตเดฐเดฆเตเดงเดฟเดเตเดเตเด. เดธเตเดตเดคเดจเตเดคเตเดฐ เดญเดพเดทเดฏเดฟเดฒเตเดณเตเดณ เดเดญเดฟเดญเดพเดทเด เดฐเตเดเดฏเตเดเต เดเดตเดคเดพเดฐเด เดเดฑเดตเดฟเดเดฎเดพเดฏเดฟ เดชเดฐเดฟเดเดฃเดฟเดเตเดเดฃเดฎเตเดจเตเดจเต เดจเดฟเตผเดฆเตเดถเดฟเดเตเดเดชเตเดชเตเดเตเดจเตเดจเต. เดจเดฟเตผเดฃเดพเดฏเด เดตเดฟเดตเดฐเดเตเดเตพเดเตเดเดพเดฏเดฟ, เดชเตเดฐเตัเดทเดฃเตฝ เดฎเดจเตเดทเตเดฏ เดเดจเตเดตเดพเดฆเด เดถเตเดชเดพเตผเดถ เดเตเดฏเตเดฏเดชเตเดชเตเดเตเดจเตเดจเต. เด เดคเตผเดเตเดเดฎ เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเดพเตฝ เดธเดเดญเดตเดฟเดเตเดเตเดจเตเดจ เดฏเดพเดคเตเดฐเต เดคเตเดฑเตเดฑเดพเดฏ เดงเดพเดฐเดฃเดเตพเดเตเดเตเด เดตเตเดฏเดพเดเตเดฏเดพเดจเดเตเดเตพเดเตเดเตเด เดเดเตเดเตพ เดเดคเตเดคเดฐเดตเดพเดฆเดฟเดเดณเดฒเตเดฒ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->