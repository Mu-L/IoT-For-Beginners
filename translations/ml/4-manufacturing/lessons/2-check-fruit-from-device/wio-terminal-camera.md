# เดเดฐเต เดเดฟเดคเตเดฐเด เดชเดฟเดเดฟเดเตเดเตเด - Wio เดเตเตผเดฎเดฟเดจเตฝ

เดชเดพเดเดคเตเดคเดฟเดจเตเดฑเต เด เดญเดพเดเดคเตเดคเดฟเตฝ, เดจเดฟเดเตเดเตพ เดจเดฟเดเตเดเดณเตเดเต Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเตเดเตเดเต เดเดฐเต เดเตเดฏเดพเดฎเดฑ เดเตเตผเดคเตเดคเต, เดเดคเดฟเตฝ เดจเดฟเดจเตเดจเต เดเดฟเดคเตเดฐเดเตเดเตพ เดชเดเตผเดจเตเดจเต เดชเดฟเดเดฟเดเตเดเตเด.

## เดนเดพเตผเดกเตโเดตเตเดฏเตผ

Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดจเต เดเดฐเต เดเตเดฏเดพเดฎเดฑ เดเดตเดถเตเดฏเดฎเตเดฃเตเดเต.

เดจเดฟเดเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจ เดเตเดฏเดพเดฎเดฑ [ArduCam Mini 2MP Plus](https://www.arducam.com/product/arducam-2mp-spi-camera-b0067-arduino/) เดเดฃเต. เดเดคเต OV2640 เดเดฎเตเดเต เดธเตเตปเดธเตผ เดเดเดฟเดธเตเดฅเดพเดจเดฎเดพเดเตเดเดฟเดฏเตเดณเตเดณ 2 เดฎเตเดเดพเดชเดฟเดเตโเดธเตฝ เดเตเดฏเดพเดฎเดฑเดฏเดพเดฃเต. เดเดคเต เดเดฟเดคเตเดฐเดเตเดเตพ เดชเดเตผเดจเตเดจเต เดชเดฟเดเดฟเดเตเดเดพเตป SPI เดเดจเตเดฑเตผเดซเตเดธเต เดตเดดเดฟ เดเดถเดฏเดตเดฟเดจเดฟเดฎเดฏเด เดจเดเดคเตเดคเตเดจเตเดจเต, เดธเตเตปเดธเตผ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดพเตป I<sup>2</sup>C เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเต.

## เดเตเดฏเดพเดฎเดฑ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเด

ArduCam-เดจเต Grove เดธเตเดเตเดเดฑเตเดฑเต เดเดฒเตเดฒ, เดชเดเดฐเด เดเดคเต SPI-เดฏเตเด I<sup>2</sup>C เดฌเดธเตเดธเตเดเดณเดฟเดฒเตเดเตเดเตเด Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเต GPIO เดชเดฟเดจเตเดเตพ เดตเดดเดฟ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเต.

### เดเดฐเต เดเตเดฒเดฟ - เดเตเดฏเดพเดฎเดฑ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเด

เดเตเดฏเดพเดฎเดฑ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเด.

![An ArduCam sensor](../../../../../translated_images/ml/arducam.20e4e4cbb2682965.webp)

1. ArduCam-เดจเตเดฑเต เดเดเดฟเดคเตเดคเดฑเดฏเดฟเดฒเต เดชเดฟเดจเตเดเตพ Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเต GPIO เดชเดฟเดจเตเดเดณเดฟเดฒเตเดเตเดเต เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดฃเด. เดถเดฐเดฟเดฏเดพเดฏ เดชเดฟเดจเตเดเตพ เดเดฃเตเดเตเดคเตเดคเดพเตป เดเดเดคเตเดคเดฐเด เดตเดฏเตเดเตเดเดพเตป, Wio เดเตเตผเดฎเดฟเดจเดฒเตเดฎเดพเดฏเดฟ เฒเณเดคเดฟเดเตเดเดชเตเดชเตเดเตเด GPIO เดชเดฟเดจเต เดธเตเดฑเตเดฑเดฟเดเตเดเตผ เดชเดฟเดจเตเดเตพ เดเตเดฑเตเดฑเดฟ เดเดเตเดเดฟเดเตเดเตเด:

    ![The wio terminal with the GPIO pin sticker on](../../../../../translated_images/ml/wio-terminal-pin-sticker.b90b1535937b84bd.webp)

1. เดเดฎเตเดชเตผ เดตเดฏเดฑเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเต เดคเดพเดดเตเดฏเตเดณเตเดณ เดเดฃเดเตเดทเดจเตเดเตพ เดเตเดฏเตเดฏเตเด:

    | ArduCAM เดชเดฟเดจเต | Wio เดเตเตผเดฎเดฟเดจเตฝ เดชเดฟเดจเต | เดตเดฟเดตเดฐเดฃเด                             |
    | ----------- | ---------------- | --------------------------------------- |
    | CS          | 24 (SPI_CS)      | SPI เดเดฟเดชเต เดธเตเดฒเดเตเดเต                         |
    | MOSI        | 19 (SPI_MOSI)    | SPI เดเตบเดเตเดฐเตเดณเตผ เดเดเตเดเตเดชเตเดเตเดเต, เดชเตเดฐเดฟเดซเดฑเตฝ เดเตปเดชเตเดเตเดเต |
    | MISO        | 21 (SPI_MISO)    | SPI เดเตบเดเตเดฐเตเดณเตผ เดเตปเดชเตเดเตเดเต, เดชเตเดฐเดฟเดซเดฑเตฝ เดเดเตเดเตเดชเตเดเตเดเต |
    | SCK         | 23 (SPI_SCLK)    | SPI เดธเตเดฐเดฟเดฏเตฝ เดฎเดฃเดฟเดเตเดเตเตผ                        |
    | GND         | 6 (GND)          | เดเตเดฐเตเดฃเตเดเต - 0V                             |
    | VCC         | 4 (5V)           | 5V เดชเดตเตผ เดธเดชเตเดฒเต                         |
    | SDA         | 3 (I2C1_SDA)     | I<sup>2</sup>C เดธเตเดฐเดฟเดฏเตฝ เดกเดพเดฑเตเดฑ              |
    | SCL         | 5 (I2C1_SCL)     | I<sup>2</sup>C เดธเตเดฐเดฟเดฏเตฝ เดฎเดฃเดฟเดเตเดเตเตผ             |

    ![The wio terminal connected to the ArduCam with jumper wires](../../../../../translated_images/ml/arducam-wio-terminal-connections.a4d5a4049bdb5ab8.webp)

    GND เดเด VCC เดเด เดเดฃเดเตเดทเดจเตเดเตพ ArduCam-เดฒเตเดเตเดเต 5V เดชเดตเตผ เดธเดชเตเดฒเต เดจเตฝเดเตเดจเตเดจเต. เดเดคเต Grove เดธเตเตปเดธเดฑเตเดเตพ (3V-เตฝ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเดคเต) เดฒเต เดตเดจเตเดจเตเดณเตเดณ 5V-เตฝ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเต. เด เดชเดตเตผ USB-C เดเดฃเดเตเดทเดจเดฟเตฝ เดจเดฟเดจเตเดจเดพเดฃเต เดจเตเดฐเดฟเดเตเดเต เดจเตเดเตเดจเตเดจเดคเต, เดเดคเต เดเดชเดเดฐเดฃเด เดชเดตเตผ เดเตเดฏเตเดฏเตเดจเตเดจเต.

    > ๐ SPI เดเดฃเดเตเดทเดจเดฟเตฝ, ArduCam-เดฒเตเด Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเตเดฎเดพเดฏเดฟ เดชเดฟเดจเต เดฒเตเดฌเดฒเตเดเดณเตเด เดเตเดกเดฟเตฝ เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจ เดชเดฟเดจเต เดชเตเดฐเตเดเดณเตเด เดชเดดเดฏ เดจเดพเดฎเดเดฐเดฃเด เดคเตเดเดฐเตเดฎเต. เด เดชเดพเดเดคเตเดคเดฟเดฒเต เดจเดฟเตผเดฆเตเดฆเตเดถเดเตเดเตพ เดชเตเดคเดฟเดฏ เดจเดพเดฎเดเดฐเดฃ เดเดจเตเดญเดตเดคเตเดคเดฟเดจเตเดชเตเดชเด เดฎเดพเดคเตเดฐเดฎเต เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเดคเต, เดชเดฟเดจเต เดชเตเดฐเต เดเตเดกเดฟเตฝ เดเดชเดฏเตเดเดฟเดเตเดเตเดฎเตเดชเตเตพ เดเดดเดฟเดเต.

1. เดเดจเดฟ Wio เดเตเตผเดฎเดฟเดจเตฝ เดจเดฟเดเตเดเดณเตเดเต เดเดฎเตเดชเตเดฏเตเดเตเดเดฑเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดพเด.

## เดกเดฟเดตเตเดธเต เดเตเดฏเดพเดฎเดฑเดฏเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดพเตป เดชเตเดฐเตเดเตเดฐเดพเด เดเตเดฏเตเดฏเตเด

Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเตฝ เดเดชเตเดชเตเตพ เดฒเต เดเดฑเตเดฑเดพเดเตเดเต เดเตเดฏเตเดค ArduCAM เดเตเดฏเดพเดฎเดฑ เดเดชเดฏเตเดเดฟเดเตเดเดพเตป เดชเตเดฐเตเดเตเดฐเดพเด เดเตเดฏเตเดฏเดพเด.

### เดเดฐเต เดเตเดฒเดฟ - เดกเดฟเดตเตเดธเต เดเตเดฏเดพเดฎเดฑเดฏเตเดฎเดพเดฏเดฟ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดฏเดพเตป เดชเตเดฐเตเดเตเดฐเดพเด เดเตเดฏเตเดฏเตเด

1. PlatformIO เดเดชเดฏเตเดเดฟเดเตเดเต เดชเตเดคเดฟเดฏ Wio เดเตเตผเดฎเดฟเดจเตฝ เดชเตเดฐเตเดเดเตเดเต เดธเตเดทเตเดเดฟเดเตเดเตเด. เด เดชเตเดฐเตเดเดเตเดเต `fruit-quality-detector` เดเดจเตเดจเต เดตเดฟเดณเดฟเดเตเดเตเด. เดธเตเดฑเดฟเดฏเตฝ-Port เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดพเตป `setup` function-เตฝ เดเตเดกเต เดเตเตผเดเตเดเตเด.

1. WiFi เดเดฃเดเตเดทเตป เดเตผเดชเตเดชเตเดเตเดคเตเดคเดพเตป เดเตเดกเต เดเตเตผเดเตเดเตเด, เดจเดฟเดเตเดเดณเตเดเต WiFi เดฐเตเดเดเดณเตเด `config.h` เดซเดฏเดฒเดฟเตฝ เดเตพเดชเตเดชเตเดเตเดคเตเดคเตเด. `platformio.ini` เดซเดฏเดฒเดฟเตฝ เดเดตเดถเตเดฏเดฎเดพเดฏ เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเตเตผเดเตเดเดพเตป เดฎเดฑเดเตเดเดฐเตเดคเต.

1. ArduCam เดฒเตเดฌเตเดฐเดฑเดฟ Arduino เดฒเตเดฌเตเดฐเดฑเดฟเดฏเดพเดฏเดฟ `platformio.ini`-เตฝ เดจเดฟเดจเตเดจเตเด เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเดพเดจเดพเดตเดฟเดฒเตเดฒ. เดชเดเดฐเด GitHub เดชเตเดเต เดตเดดเดฟ เดธเตเดดเตเดธเต เดเตเดกเต เดกเตเตบเดฒเตเดกเต เดเตเดฏเตเดคเต เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดคเดฟเดฐเดฟเดเตเดเดฃเด. เดเดตเดฏเดฟเตฝ เดจเดฟเดจเตเดจเตเตเดเดฃเตเดเต เดฒเดญเดฟเดเตเดเตเดจเตเดจเต:

    * GitHub repo [https://github.com/ArduCAM/Arduino.git](https://github.com/ArduCAM/Arduino.git) เดเตเดฒเตเตบ เดเตเดฏเตเดฏเตเด
    * GitHub-เตฝ [github.com/ArduCAM/Arduino](https://github.com/ArduCAM/Arduino) เดฒเดญเดฟเดเตเดเตเดเตเดฃเตเดเต **Code** เดฌเดเตเดเตบ เดเตเดฒเดฟเดเตเดเต เดเตเดฏเตเดคเต zip เดเดฏเดฟ เดกเตเตบเดฒเตเดกเต เดเตเดฏเตเดฏเตเด

1. เด เดเตเดกเต เดฒเตเดเดฐเดฟเตฝ เดจเดฟเดจเตเดจเตเด `ArduCAM` เดซเตเตพเดกเตผ เดฎเดพเดคเตเดฐเด เดตเตเดฃเด. เดฎเตเดคเตเดคเด เดซเตเตพเดกเตผ เดจเดฟเดเตเดเดณเตเดเต เดชเตเดฐเตเดเดเตเดเดฟเดฒเต `lib` เดซเตเตพเดกเดฑเดฟเดฒเตเดเตเดเต เดเตเดชเตเดชเดฟ เดเตเดฏเตเดฏเตเด.

    > โ๏ธ เดฎเตเดคเตเดคเด เดซเตเตพเดกเตผ เดเตเดชเตเดชเดฟ เดเตเดฏเตเดฏเดฃเด, เดเดฅเดตเดพ เดเตเดกเต `lib/ArduCam`-เตฝ เดคเดจเตเดจเต เดตเตเดฃเด. `ArduCam` เดซเตเตพเดกเดฑเดฟเดฒเต เดเดณเตเดณเดเดเตเดเด เดธเตเดเตเดทเดฟเดเตเดเต `lib`-เดฒเตเดเตเดเต เดฎเดพเดฑเตเดฑเดฐเตเดคเต; เดฎเตเดดเตเดตเตป เดซเตเตพเดกเตผ เดเตเดชเตเดชเดฟ เดเตเดฏเตเดฏเตเด.

1. ArduCam เดฒเตเดฌเตเดฐเดฑเดฟ เดตเดฟเดตเดฟเดง เดเตเดฏเดพเดฎเดฑเดเตพเดเตเดเต เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเต. เดจเดฟเดเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเดพเตป เดชเตเดเตเดจเตเดจ เดเตเดฏเดพเดฎเดฑเดฏเตเดเต เดคเดฐเดฎเดจเตเดธเดฐเดฟเดเตเดเต เดเตเดฎเตเดชเตเดฒเตผ เดซเตเดฒเดพเดเตเดเตพ เดธเดเตเดเตเดเดฐเดฟเดเตเดเดฃเด - เดเดคเดฟเดฒเตเดเต เดเดชเดฏเตเดเดฟเดเตเดเดพเดคเตเดค เดเตเดฏเดพเดฎเดฑเตเดเตพเดเตเดเต เดฌเดจเตเดงเดชเตเดชเตเดเตเด เดเตเดกเต เดเดชเตเดฐเดพเดชเตเดคเดฎเดพเดเตเดเดฟ เดฒเตเดฌเตเดฐเดฑเดฟเดฏเต เดเตเดฑเตเดคเดพเดเตเดเตเด. OV2640 เดเตเดฏเดพเดฎเดฑเดฏเตเดเตเดเดพเดฏเดฟ เดฒเตเดฌเตเดฐเดฑเดฟ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดพเตป `platformio.ini` เดซเดฏเตฝ เดเดตเดธเดพเดจเด เดคเดพเดดเตเดฏเตเดณเตเดณ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```ini
    build_flags =
        -DARDUCAM_SHIELD_V2
        -DOV2640_CAM
    ```

    เดเดคเต 2 เดเตเดฎเตเดชเตเดฒเตผ เดซเตเดฒเดพเดเตเดเตพ เดธเดเตเดเตเดเดฐเดฟเดเตเดเตเดจเตเดจเต:

      * `ARDUCAM_SHIELD_V2` เดฒเตเดฌเตเดฐเดฑเดฟเดฏเดฟเตฝ เดเตเดฏเดพเดฎเดฑ Arduino เดฌเตเตผเดกเดฟเตฝ (shield เดเดฏเดฟ เดเดฑเดฟเดฏเดชเตเดชเตเดเตเดจเตเดจเดคเต) เดเดฃเตเดเตเดจเตเดจเต เดเดฑเดฟเดฏเดฟเดเตเดเตเดจเตเดจเดคเต.
      * `OV2640_CAM` เดฒเตเดฌเตเดฐเดฑเดฟเดฏเดฟเตฝ OV2640 เดเตเดฏเดพเดฎเดฑเดฏเตเดเตเดเต เดฌเดจเตเดงเดชเตเดชเตเดเตเด เดเตเดกเต เดฎเดพเดคเตเดฐเดฎเต เดตเตเดฃเดฎเตเดจเตเดจเต เดเดฑเดฟเดฏเดฟเดเตเดเตเดจเตเดจเดคเต.

1. `src` เดซเตเตพเดกเดฑเดฟเตฝ `camera.h` เดเดจเตเดจ เดนเตเดกเตผ เดซเดฏเตฝ เดเตเตผเดเตเดเตเด. เดเดคเต เดเตเดฏเดพเดฎเดฑเดฏเตเดฎเดพเดฏเดฟ เดเดถเดฏเดตเดฟเดจเดฟเดฎเดฏเด เดจเดเดคเตเดคเดพเตป เดเตเดกเต เดเดเตเดจเตเดจเดคเดพเดฃเต. เดคเดพเดดเตเดฏเตเดณเตเดณ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```cpp
    #pragma once
    
    #include <ArduCAM.h>
    #include <Wire.h>
    
    class Camera
    {
    public:
        Camera(int format, int image_size) : _arducam(OV2640, PIN_SPI_SS)
        {
            _format = format;
            _image_size = image_size;
        }
    
        bool init()
        {
            // CPLD เดชเตเดจเดเดธเดเตเดเดฎเดพเดเตเดเตเด
            _arducam.write_reg(0x07, 0x80);
            delay(100);
    
            _arducam.write_reg(0x07, 0x00);
            delay(100);
    
            // ArduCAM SPI เดฌเดธเต เดถเดฐเดฟเดฏเดพเดฃเต เดเดจเตเดจเต เดชเดฐเดฟเดถเตเดงเดจ เดจเดเดคเตเดคเตเด
            _arducam.write_reg(ARDUCHIP_TEST1, 0x55);
            if (_arducam.read_reg(ARDUCHIP_TEST1) != 0x55)
            {
                return false;
            }
                
            // MCU เดฎเดคเต เดฎเดพเดฑเตเดฑเตเด
            _arducam.set_mode(MCU2LCD_MODE);
    
            uint8_t vid, pid;
    
            // เดเตเดฏเดพเดฎเดฑ เดฎเตเดกเตเดฏเตเตพ เดคเดฐเด OV2640 เดเดฃเต เดเดจเตเดจเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด
            _arducam.wrSensorReg8_8(0xff, 0x01);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_HIGH, &vid);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_LOW, &pid);
            if ((vid != 0x26) && ((pid != 0x41) || (pid != 0x42)))
            {
                return false;
            }
            
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
            _arducam.OV2640_set_Light_Mode(Auto);
            _arducam.OV2640_set_Special_effects(Normal);
            delay(1000);
    
            return true;
        }
    
        void startCapture()
        {
            _arducam.flush_fifo();
            _arducam.clear_fifo_flag();
            _arducam.start_capture();
        }
    
        bool captureReady()
        {
            return _arducam.get_bit(ARDUCHIP_TRIG, CAP_DONE_MASK);
        }
    
        bool readImageToBuffer(byte **buffer, uint32_t &buffer_length)
        {
            if (!captureReady()) return false;
    
            // เดเดฟเดคเตเดฐ เดซเดฏเตฝ เดจเตเดณเด เดจเตเดเตเด
            uint32_t length = _arducam.read_fifo_length();
            buffer_length = length;
    
            if (length >= MAX_FIFO_SIZE)
            {
                return false;
            }
            if (length == 0)
            {
                return false;
            }
    
            // เดฌเดซเตผ เดธเตเดทเตเดเดฟเดเตเดเตเด
            byte *buf = new byte[length];
    
            uint8_t temp = 0, temp_last = 0;
            int i = 0;
            uint32_t buffer_pos = 0;
            bool is_header = false;
    
            _arducam.CS_LOW();
            _arducam.set_fifo_burst();
            
            while (length--)
            {
                temp_last = temp;
                temp = SPI.transfer(0x00);
                //FIFO-เดฏเดฟเตฝ เดจเดฟเดจเตเดจเต JPEG เดกเดพเดฑเตเดฑ เดตเดพเดฏเดฟเดเตเดเตเด
                if ((temp == 0xD9) && (temp_last == 0xFF)) //เดเดจเตเดคเตเดฏเดฎเดพเดฏเดคเดพเดฏเดฟ เดเดฃเตเดเตเดคเตเดคเดฟเดฏเดพเตฝ, while เดฒเตเดชเตเดชเต เดฎเตเดเดเตเดเตเด
                {
                    buf[buffer_pos] = temp;
    
                    buffer_pos++;
                    i++;
                    
                    _arducam.CS_HIGH();
                }
                if (is_header == true)
                {
                    //เดฌเดซเตผ เดชเตเตผเดฃเตเดฃเดฎเดฒเตเดฒเตเดเตเดเดฟเตฝ เดเดฟเดคเตเดฐ เดกเดพเดฑเตเดฑ เดฌเดซเดฑเดฟเดฒเตเดเตเดเต เดเดดเตเดคเตเด
                    if (i < 256)
                    {
                        buf[buffer_pos] = temp;
                        buffer_pos++;
                        i++;
                    }
                    else
                    {
                        _arducam.CS_HIGH();
    
                        i = 0;
                        buf[buffer_pos] = temp;
    
                        buffer_pos++;
                        i++;
    
                        _arducam.CS_LOW();
                        _arducam.set_fifo_burst();
                    }
                }
                else if ((temp == 0xD8) & (temp_last == 0xFF))
                {
                    is_header = true;
    
                    buf[buffer_pos] = temp_last;
                    buffer_pos++;
                    i++;
    
                    buf[buffer_pos] = temp;
                    buffer_pos++;
                    i++;
                }
            }
            
            _arducam.clear_fifo_flag();
    
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
    
            // เดฌเดซเตผ เดฎเดเดเตเดเตเด
            *buffer = buf;
        }
    
    private:
        ArduCAM _arducam;
        int _format;
        int _image_size;
    };
    ```

    เดเดคเต ArduCam เดฒเตเดฌเตเดฐเดฑเดฟเดเตพ เดเดชเดฏเตเดพเดเดฟเดเตเดเต เดเตเดฏเดพเดฎเดฑ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเตเดจเตเดจ, SPI เดฌเดธเตเดธเต เดเดชเดฏเตเดเดฟเดเตเดเต เดเดตเดถเตเดฏเดชเตเดชเตเดเตเดฎเตเดชเตเตพ เดเดฟเดคเตเดฐเดเตเดเตพ เดเดเตเดเตเดเตเดจเตเดจเดคเตเด เดเดคเดพเดฃเต. เด เดเตเดกเต ArduCam-เดจเต เดฎเดพเดคเตเดฐเด เดชเตเดฐเดคเตเดฏเตเดเด, เดเดคเดฟเดจเดพเตฝ เดเดคเดฟเดจเตเดฑเต เดชเตเดฐเดตเตผเดคเตเดคเดจเด เดเดชเตเดชเตเตพ เดฎเดจเดธเตเดธเดฟเดฒเดพเดเตเดเตเดฃเตเดเดคเดฟเดฒเตเดฒ.

1. `main.cpp`-เดฒเตเดณเดณ เดฎเดฑเตเดฑเต `include` เดชเตเดฐเดเตเดฏเดพเดชเดจเดเตเดเตพเดเตเดเต เดคเดพเดดเต เดคเดพเดดเตเดฏเตเดณเตเดณ เดเตเดกเต เดเตเตผเดเตเดเตเด,camera.h เดเตพเดชเตเดชเตเดเตเดคเตเดคเตเดเดฏเตเด เดเตเดฏเดพเดฎเดฑ เดเตเดฒเดพเดธเต เดเดฌเตเดเดเตเดฑเตเดฑเต เดธเตเดทเตเดเดฟเดเตเดเตเดเดฏเตเดฎเดพเดฃเต:

    ```cpp
    #include "camera.h"

    Camera camera = Camera(JPEG, OV2640_640x480);
    ```

    เดเดคเต JPEG เดฐเตเดชเดคเตเดคเดฟเตฝ 640x480 เดฑเตเดธเดฒเตเดฏเตเดทเดจเดฟเตฝ เดเดฟเดคเตเดฐเดเตเดเตพ เดธเดเดฐเดเตเดทเดฟเดเตเดเตเดจเตเดจ `Camera` เดเดฌเตเดเดเตเดฑเตเดฑเต เดธเตเดทเตเดเดฟเดเตเดเตเดจเตเดจเต. เดเดฏเตผเดจเตเดจ เดฑเตเดธเดฒเตเดฏเตเดทเตป (3280x2464 เดตเดฐเต) เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเตเด, เดชเดเตเดทเต เดเดฎเตเดเต เดเตเดฒเดพเดธเตโเดซเดฏเตผ เดตเดณเดฐเต เดเตเดฑเดฟเดฏ เดเดฟเดคเตเดฐเด (227x227) เดเดชเดฏเตเดเดฟเดเตเดเต เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจเดคเดฟเดจเดพเตฝ เดตเดฒเดฟเดฏ เดเดฟเดคเตเดฐเดเตเดเตพ เดชเดเตผเดจเตเดจเต เดเดฏเดเตเดเตเดฃเตเด เดเดตเดถเตเดฏเดฎเดฟเดฒเตเดฒ.

1. เดเตเดฏเดพเดฎเดฑ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดพเตป เดคเดพเดดเต เดเตเดเตเดเตเดเตเดจเตเดจ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```cpp
    void setupCamera()
    {
        pinMode(PIN_SPI_SS, OUTPUT);
        digitalWrite(PIN_SPI_SS, HIGH);
    
        Wire.begin();
        SPI.begin();
    
        if (!camera.init())
        {
            Serial.println("Error setting up the camera!");
        }
    }
    ```

    เด `setupCamera` เดซเดเดเตเดทเตป SPI เดเดฟเดชเต เดธเตเดฒเดเตเดเต เดชเดฟเดจเตเด (`PIN_SPI_SS`) เดเดฏเตผเดจเตเดจ เดจเดฟเดฒเดฏเดฟเตฝ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเต Wio เดเตเตผเดฎเดฟเดจเตฝ SPI เดเตบเดเตเดฐเตเดณเตผ เดเดเตเดเตเดจเตเดจเต. เดถเตเดทเด I<sup>2</sup>C, SPI เดฌเดธเตเดธเตเดเตพ เดเดฐเดเดญเดฟเดเตเดเตเด. เดเดตเดธเดพเดจเด เดเตเดฏเดพเดฎเดฑ เดเตเดฒเดพเดธเตเดธเต เดเตปเดทเตโเดเตปเดธเต เดเดฐเดเดญเดฟเดเตเดเต เดธเตเตปเดธเตผ เดเตเดฐเดฎเตเดเดฐเดฃเดเตเดเตพ เดจเดเดคเตเดคเตเดเดฏเตเด เดเดฒเตเดฒเดพเด เดถเดฐเดฟเดฏเดพเดฏ เดฐเตเดคเดฟเดฏเดฟเตฝ เดฌเดจเตเดงเดฟเดชเตเดชเดฟเดเตเดเดฟเดเตเดเตเดฃเตเดเตเดจเตเดจเต เดเดฑเดชเตเดชเดพเดเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเด.

1. `setup` เดซเดเดเตเดทเตป เดเดตเดธเดพเดจเด เด เดซเดเดเตเดทเตป เดตเดฟเดณเดฟเดเตเดเตเด:

    ```cpp
    setupCamera();
    ```

1. เดเตเดกเต เดฌเดฟเตฝเดกเต เดเตเดฏเตเดคเต เดเดชเตโเดฒเตเดกเต เดเตเดฏเตเดฏเตเด, เดธเตเดฐเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเดฑเดฟเตฝ เดเดเตเดเตเดชเตเดเตเดเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด. `Error setting up the camera!` เดเดจเตเดจ เดธเดจเตเดฆเตเดถเด เดเดพเดฃเตเดฎเตเดเตเดเดฟเตฝ เดตเดฏเดฑเดฟเดเดเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเต เดเดฒเตเดฒเดพเด เดถเดฐเดฟเดฏเดพเดฏ GPIO เดชเดฟเดจเตเดเดณเดฟเดฒเตเดเตเดเตเดณเตเดณ เดเตเดฌเดฟเดณเตเดเตพ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตโเดคเดฟเดเตเดเตเดฃเตเดเตเดฏเตเดจเตเดจเต เดเดฑเดชเตเดชเต เดตเดฐเตเดคเตเดคเตเด; เดเดฎเตเดชเตผ เดตเดฏเดฑเตเดเตพ เดถเดฐเดฟเดฏเดพเดฏ เดตเดฟเดงเดคเตเดคเดฟเตฝ เดเดเดฟเดจเดฎเดพเดฏเดฟ เดธเตเดฑเตเดฑเตเดเตเดฏเตเดฏเดชเตเดชเตเดเตเดเดฟเดเตเดเตเดฃเตเดเต เดเดจเตเดจเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด.

## เดเดฐเต เดเดฟเดคเตเดฐเด เดชเดเดฐเตโเดคเตเดคเตเด

Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดจเต เดเดจเดฟ เดเดฐเต เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเตเดฎเตเดชเตเตพ เดเดฟเดคเตเดฐเด เดชเดเดฐเตโเดคเตเดคเดพเตป เดชเตเดฐเตเดเตเดฐเดพเด เดเตเดฏเตเดฏเดพเดตเตเดจเตเดจเดคเดพเดฃเต.

### เดเดฐเต เดเตเดฒเดฟ - เดเดฐเต เดเดฟเดคเตเดฐเด เดชเดเดฐเตโเดคเตเดคเตเด

1. เดฎเตเดเตเดฐเตเดเตเดเตบเดเตเดฐเตเดณเดฑเตเดเตพ เดเตเดกเต เดเดจเดจเตเดคเด เดชเตเดฐเดตเตผเดคเตเดคเดฟเดชเตเดชเดฟเดเตเดเตเดจเตเดจเต, เดเดคเดฟเดจเดพเตฝ เดเดฐเต เดธเตเตปเดธเตผ เดเดฃเตเดเดพเดเดพเดคเต เดซเตเดเตเดเต เดเดเตเดเตเดเตเดจเตเดจเดคเต เดฎเตเดเตเดเดชเตเดชเตเดเตเด เดฐเตเดคเดฟเดฏเดฟเตฝ เดเตเดฐเดฟเดเตผเดเตเดฏเตเดฏเดพเตป เดชเดฑเตเดฑเดฟเดฒเตเดฒ. Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดจเต เดเดเตเดเตเดเดฟเดฒเตเดณเตเดณ เดฌเดเตเดเดฃเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเต เดเตเดฏเดพเดฎเดฑ เดเดฐเต เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเดฒเดฟเดฒเตเดเต เดเตเดฐเดฟเดเตผเดเตเดฏเตเดฏเดพเด. เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเต `setup` เดซเดเดเตเดทเตป เดเดตเดธเดพเดจเด เดเตเตผเดเตเดเตเด, เดเดดเดฟเดฏเตเด เดธเดฟ เดฌเดเตเดเตบ (เดฎเตเดเดณเดฟเตฝ เดฎเตเดจเตเดจเต เดฌเดเตเดเดฃเตเดเดณเดฟเตฝ เดชเดตเตผ เดธเตเดตเดฟเดเตเดเต เดเดเตเดคเตเดคเดคเดพเดฃเดคเต).

    ![The C button on the top closest to the power switch](../../../../../translated_images/ml/wio-terminal-c-button.73df3cb1c1445ea0.webp)

    ```cpp
    pinMode(WIO_KEY_C, INPUT_PULLUP);
    ```

    `INPUT_PULLUP` เดฎเตเดกเต เดเตปเดชเตเดเตเดเดฟเดจเต เดชเตเดฐเดคเตเดฏเดเตเดทเดฎเดพเดฏเดฟ เดฎเดฑเดฟเดเตเดเตเดเดฏเดพเดฃเต. เดเดฆเดพเดนเดฐเดฃเดคเตเดคเดฟเดจเต, เดธเดพเดงเดพเดฐเดฃ เดเดฐเต เดฌเดเตเดเตบ เดเดฎเตผเดเตเด เดเตเดฏเตเดฏเดพเดคเตเดคเดชเตเดชเตเตพ เดฒเต เดธเดฟเดเตเดจเตฝ เดเดฏเดฏเตเดเตเดเตเดเดฏเตเด เดเดฎเตผเดคเตเดคเตเดฎเตเดชเตเตพ เดนเต เดธเดฟเดเตเดจเตฝ เดเดฏเดฏเตเดเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเด. เดเดจเตเดจเดพเตฝ `INPUT_PULLUP` เดเดฏเดฟ เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดพเตฝ เดเดฎเตผเดคเตเดคเดพเดคเตเดคเดชเตเดชเตเตพ เดนเต เดธเดฟเดเตเดจเตฝ เดเดฏเดฏเตเดเตเดเตเดเดฏเตเด, เดเดฎเตผเดคเตเดคเดฟเดฏเดชเตเดชเตเตพ เดฒเต เดธเดฟเดเตเดจเตฝ เดเดฏเดฏเตเดเตเดเตเด.

1. `loop` เดซเดเดเตเดทเตปเดเตเดเต เดฎเตเตปเดชเต, เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเดฒเดฟเดจเต เดชเตเดฐเดคเดฟเดเดฐเดฟเดเตเดเตเดจเตเดจ เดชเตเดคเดฟเดฏ เดเดฐเต เดถเตเดจเตเดฏ เดซเดเดเตเดทเตป เดเตเตผเดเตเดเตเด:

    ```cpp
    void buttonPressed()
    {
        
    }
    ```

1. เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเดฟเดฏเดชเตเดชเตเตพ เดเดคเต `loop` เดซเดเดเตเดทเดจเดฟเตฝ เดตเดฟเดณเดฟเดเตเดเตเด:

    ```cpp
    void loop()
    {
        if (digitalRead(WIO_KEY_C) == LOW)
        {
            buttonPressed();
            delay(2000);
        }
    
        delay(200);
    }
    ```

    เด เดเต เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเดฟเดฏเตเดจเตเดจเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดจเตเดจเต. เดเดฎเตผเดคเตเดคเดฟเดฏเดพเตฝ `buttonPressed` เดซเดเดเตเดทเตป เดตเดฟเดณเดฟเดเตเดเดชเตเดชเตเดเตเด, เดคเตเดเตผเดจเตเดจเต 2 เดธเตเดเตเดเตปเดกเต เดเดเดตเตเดณ เดจเตฝเดเตเดจเตเดจเต. เดฌเดเตเดเตบ เดตเดฟเดเตเดเตเดชเตเดฏเตเดจเตเดจเต เดเดฑเดชเตเดชเดพเดเตเดเดพเตป เดเดคเต เดเดฃเต, เดเดชเตเดชเตเตพ เดฒเตเดเดเต เดชเตเดฐเดธเต เดฐเดฃเตเดเตเดคเดตเดฃ เดชเดฟเดถเดเต เดเดฏเดฟ เดฐเดเดฟเดธเตเดฑเตเดฑเตผ เดเตเดฏเตเดฏเดชเตเดชเตเดเตเดเดฏเดฟเดฒเตเดฒ.

    > ๐ Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเดฒเต เดฌเดเตเดเตบ `INPUT_PULLUP` เดเดฏเดคเดฟเดจเดพเตฝ เดเดฎเตผเดคเตเดคเดพเดคเตเดคเดชเตเดชเตเตพ เดนเต เดธเดฟเดเตเดจเตฝ, เดเดฎเตผเดคเตเดคเตเดฎเตเดชเตเตพ เดฒเต เดธเดฟเดเตเดจเตฝ เดเดฏเดเตเดเตเดเตเดณเตเดณเตเดจเตเดจเต.

1. `buttonPressed` เดซเดเดเตเดทเดจเดฟเตฝ เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```cpp
    camera.startCapture();
 
    while (!camera.captureReady())
        delay(100);

    Serial.println("Image captured");

    byte *buffer;
    uint32_t length;

    if (camera.readImageToBuffer(&buffer, length))
    {
        Serial.print("Image read to buffer with length ");
        Serial.println(length);

        delete(buffer);
    }
    ```

    เด เดเตเดกเต `startCapture` เดตเดฟเดณเดฟเดเตเดเต เดเตเดฏเดพเดฎเดฑ เดเตเดฏเดพเดชเตเดเตผ เดเดฐเดเดญเดฟเดเตเดเตเดจเตเดจเต. เดเตเดฏเดพเดฎเดฑ เดนเดพเตผเดกเตเดตเตเดฏเตผ เดกเดพเดฑเตเดฑ เดคเดฟเดฐเดฟเดเต เดจเตฝเดเตเดจเตเดจเดคเตเดชเตเดฒเต เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเดพเดคเต, เดเตเดฏเดพเดชเตเดเตผ เดคเตเดเดเตเดเดพเตป เดจเดฟเดฐเตโเดฆเตเดฆเตเดถเด เดเดฏเดฏเตเดเตเดเตเดจเตเดจเต, เดชเดฟเดจเตเดจเต เดเตเดฏเดพเดฎเดฑ เดชเดฟเดฑเดเดฟเตฝ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเต เดเดฟเดคเตเดฐเด เดชเดเตผเดจเตเดจเต เดชเดฟเดเตเดคเตเดคเต JPEG เดเดฏเดฟ เดฎเดพเดฑเตเดฑเดฟ เดเตเดฏเดพเดฎเดฑเดฏเดฟเดฒเต เดฒเตเดเตเดเตฝ เดฌเดซเดฑเดฟเตฝ เดธเตเดเตเดทเดฟเดเตเดเตเด. `captureReady` เดตเดฟเดณเดฟเดเตเดเดชเตเดชเตเตพ เดฏเดฅเดพเตผเดคเตเดฅ เดเดฟเดคเตเดฐเด เดชเดเตผเดจเตเดจเต เดเดดเดฟเดเตเดเต เดเดจเตเดจเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเดจเตเดจเต.

    เดเตเดฏเดพเดชเตเดเตผ เดเดดเดฟเดเตเดเดพเตฝ, `readImageToBuffer` เดตเดฟเดณเดฟเดเตเดเต เดเตเดฏเดพเดฎเดฑเดฏเดฟเดฒเต เดฌเดซเตผเดฏเดฟเตฝ เดจเดฟเดจเตเดจเตเดณเตเดณ เดเดฟเดคเตเดฐเด เดธเตเดฅเดฒเดคเตเดคเต เดฌเดซเดฑเดฟเดฒเตเดเตเดเต (เดฌเตเดฑเตเดฑเตเดเดณเตเดเต เดเดฑเต) เดเตเดชเตเดชเดฟ เดเตเดฏเตเดฏเตเด. เดฌเดซเดฑเดฟเดจเตเดฑเต เดจเตเดณเด เดธเตเดฑเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเดฑเดฟเดฒเตเดเตเดเต เดเดฏเดฏเตเดเตเดเตเดจเตเดจเต.

1. เดเตเดกเต เดฌเดฟเตฝเดกเต เดเตเดฏเตเดคเต เดเดชเตโเดฒเตเดกเต เดเตเดฏเตเดฏเตเด, เดธเตเดฐเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเตผ เดเดเตเดเตเดชเตเดเตเดเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด. เดเดฐเต เดคเดตเดฃเดฏเตเด C เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเตเดฎเตเดชเตเตพ เดเดฟเดคเตเดฐเด เดชเดเตผเดจเตเดจเต เดชเดฟเดเดฟเดเตเดเตเด, เดเดฟเดคเตเดฐเดคเตเดคเดฟเดจเตเดฑเต เดตเดฒเดฟเดชเตเดชเด เดธเตเดฐเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเดฑเดฟเตฝ เดเดพเดฃเดพเด.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 9224
    Image captured
    Image read to buffer with length 11272
    ```

    เดตเดฟเดตเดฟเดง เดเดฟเดคเตเดฐเดเตเดเดณเตเดเต เดตเดฒเดฟเดชเตเดชเด เดตเตเดฏเดคเตเดฏเดธเตเดคเดฎเดพเดฃเต. เดเดต JPEG เดเด เดเตเดฃเตเดเต เดธเดเดเตเดทเดฟเดชเตเดคเดฎเดพเดเตเดเดชเตเดชเตเดเตเดเดพเดฃเต, เดเดฐเต JPEG เดซเดฏเดฒเดฟเดจเตเดฑเต เดตเดฒเดฟเดชเตเดชเด เดเดฟเดคเตเดฐเดคเตเดคเดฟเดฒเต เดเดณเตเดณเดเดเตเดเดคเตเดคเต เดเดถเตเดฐเดฏเดฟเดเตเดเดฟเดฐเดฟเดเตเดเตเดจเตเดจเต.

> ๐ เด เดเตเดกเต [code-camera/wio-terminal](../../../../../4-manufacturing/lessons/2-check-fruit-from-device/code-camera/wio-terminal) เดซเตเตพเดกเดฑเดฟเตฝ เดฒเดญเตเดฏเดฎเดพเดฃเต.

๐ เดจเดฟเดเตเดเตพ เดตเดฟเดเดฏเดเดฐเดฎเดพเดฏเดฟ Wio เดเตเตผเดฎเดฟเดจเดฒเดฟเตฝ เดเดฟเดคเตเดฐเดเตเดเตพ เดชเดเตผเดจเตเดจเต เดชเดฟเดเดฟเดเตเดเต.

## เดเดเตเดเดฟเดเด - เดเตเดฏเดพเดฎเดฑ เดเดฟเดคเตเดฐเดเตเดเตพ SD เดเดพเตผเดกเต เดเดชเดฏเตเดเดฟเดเตเดเต เดธเตเดฅเดฟเดฐเตเดเดฐเดฟเดเตเดเตเด

เดเตเดฏเดพเดฎเดฑ เดชเดฟเดเดฟเดเตเดเตเดเตเดคเตเดค เดเดฟเดคเตเดฐเดเตเดเตพ เดเดพเดฃเดพเดจเตเดณเตเดณ เดเดณเตเดชเตเดชเด เดเดฐเต SD เดเดพเตผเดกเดฟเตฝ เดเดดเตเดคเตเดจเตเดจเดคเดฟเดจเตเด เดชเดฟเดจเตเดจเตเดเต เดจเดฟเดเตเดเดณเตเดเต เดเดฎเตเดชเตเดฏเตเดเตเดเดฑเดฟเตฝ เดเดต เดเดพเดฃเตเดจเตเดจเดคเดฟเดจเตเดฎเดพเดฃเต. spare microSD เดเดพเตผเดกเต, microSD เดเดพเตผเดกเต เดธเตเดเตเดเดฑเตเดฑเต (เดเดกเดพเดชเตเดฑเตเดฑเตผ เดธเดนเดฟเดคเด) เดเดณเตเดณเดชเตเดชเตเตพ เดฎเดพเดคเตเดฐเด เดเดคเต เดเตเดฏเตเดฏเตเด.

Wio เดเตเตผเดฎเดฟเดจเตฝ 16GB เดตเดฐเต microSD เดเดพเตผเดกเตเดเตพ เดฎเดพเดคเตเดฐเด เดชเดฟเดจเตเดคเตเดฃเดฏเตเดเตเดเตเดจเตเดจเต. เดตเดฒเดฟเดฏ เดเดพเตผเดกเตเดเตพ เดชเตเดฐเตเดคเตเดคเดชเตเดชเตเดเดฟเดฒเตเดฒ.

### เดเดฐเต เดเตเดฒเดฟ - เดเตเดฏเดพเดฎเดฑ เดเดฟเดคเตเดฐเดเตเดเตพ SD เดเดพเตผเดกเต เดเดชเดฏเตเดเดฟเดเตเดเต เดธเตเดฅเดฟเดฐเตเดเดฐเดฟเดเตเดเตเด

1. เดจเดฟเดเตเดเดณเตเดเต เดเดฎเตเดชเตเดฏเตเดเตเดเดฑเดฟเตฝ เดเดจเตเดฏเตเดเตเดฏเดฎเดพเดฏ เดเดชเตเดฒเดฟเดเตเดเตเดทเตป เดเดชเดฏเตเดเดฟเดเตเดเต microSD เดเดพเตผเดกเต FAT32 เดเดฒเตเดฒเตเดเตเดเดฟเตฝ exFAT เดเดฏเดฟ เดซเตเตผเดฎเดพเดฑเตเดฑเต เดเตเดฏเตเดฏเตเด (macOS-เตฝ Disk Utility, Windows-เตฝ File Explorer, Linux-เตฝ เดเดฎเดพเตปเดกเต เดฒเตเตป เดเตเตพเดธเต).

1. microSD เดเดพเตผเดกเต เดชเดตเตผ เดธเตเดตเดฟเดเตเดเต เดคเดพเดดเตเดฏเตเดณเตเดณ เดธเตเดเตเดเดฑเตเดฑเดฟเตฝ เดเดเตเด. เดเดคเต เดเตเดฒเดฟเดเตเดเตเดเตเตผเดจเตเดจเตเด เดธเตเดฅเดฟเดคเดฟเดเตเดฏเตเดฏเตเดจเตเดจเดคเตเดฎเดพเดเตเดจเตเดจเดคเตเดตเดฐเต เดฎเตเดเดฟเดเตเดเดเดเตเดเดฃเด, เดจเดฟเดเตเดเดณเตเดเต เดจเดเด เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดจเตเดฒเดฟ เดชเตเดฒเตเดณเตเดณ เดฎเตเดคเดฟเตพ เดเดชเดเดฐเดฃเด เดเดชเดฏเตเดเดฟเดเตเดเต เดเดเดฟเดเตเดเตเดเตเดเดพเดตเตเดจเตเดจเดคเดพเดฃเต.

1. `main.cpp` เดซเดฏเดฒเดฟเดจเตเดฑเต เดฎเตเดเดณเดฟเดฒเตโ เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ include เดชเตเดฐเดธเตเดคเดพเดตเดจเดเดณเตโ เดเตเตผเดเตเดเตเด:

    ```cpp
    #include "SD/Seeed_SD.h"
    #include <Seeed_FS.h>
    ```

1. `setup`-เดจเต เดฎเตเดฎเตเดชเต เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดซเดเดเตเดทเตป เดเตเตผเดเตเดเตเด:

    ```cpp
    void setupSDCard()
    {
        while (!SD.begin(SDCARD_SS_PIN, SDCARD_SPI))
        {
            Serial.println("SD Card Error");
        }
    }
    ```

    เดเดคเต SPI เดฌเดธเต เดเดชเดฏเตเดเดฟเดเตเดเต SD เดเดพเตผเดกเต เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเตเดจเตเดจเต.

1. เดเดคเต `setup` เดซเดเดเตเดทเดจเดฟเตฝ เดตเดฟเดณเดฟเดเตเดเตเด:

    ```cpp
    setupSDCard();
    ```

1. `buttonPressed` เดซเดเดเตเดทเตปเดเตเดเต เดฎเตเดเดณเดฟเตฝ เดคเดพเดดเต เดเดพเดฃเตเดจเตเดจ เดเตเดกเต เดเตเตผเดเตเดเตเด:

    ```cpp
    int fileNum = 1;

    void saveToSDCard(byte *buffer, uint32_t length)
    {
        char buff[16];
        sprintf(buff, "%d.jpg", fileNum);
        fileNum++;
    
        File outFile = SD.open(buff, FILE_WRITE );
        outFile.write(buffer, length);
        outFile.close();

        Serial.print("Image written to file ");
        Serial.println(buff);
    }
    ```

    เดเดคเต เดซเดฏเตฝ เดเดฃเดเตเดเดฟเดจเต เดเดฐเต เดเตเดฒเตเดฌเตฝ เดตเตผเดฃเดจ เดจเตฝเดเตเดจเตเดจเต. เดเดฟเดคเตเดฐเด เดซเดฏเตฝ เดจเดพเดฎเดเตเดเตพเดเตเดเต เดเดคเต เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจเต, เดเดคเดพเดฏเดคเต เดชเดฒ เดเดฟเดคเตเดฐเดเตเดเดณเตเด เดตเตเดฏเดคเตเดฏเดธเตเดคเดฎเดพเดฏ เดซเดฏเตฝ เดจเดพเดฎเดเตเดเดณเตเดเต (1.jpg, 2.jpg เดคเตเดเดเตเดเดฟเดฏเดต) เดธเตเดตเต เดเตเดฏเตเดฏเดชเตเดชเตเดเตเด.

    เดคเตเดเตผเดจเตเดจเต `saveToSDCard` เดเดจเตเดจ เดซเดเดเตเดทเตป เดจเดฟเตผเดตเตเดตเดเดฟเดเตเดเตเดจเตเดจเต, เดฌเตเดฑเตเดฑเตเดเดณเตเดเต เดฌเดซเดฑเตเด เดฌเดซเตผ เดจเตเดณเดตเตเด เดธเตเดตเตเดเดฐเดฟเดเตเดเต เดซเดฏเตฝ เดจเดพเดฎเด เดธเตเดทเตเดเดฟเดเตเดเตเดเดฏเตเด, เดเดฃเดเตเดเต เดเตเดเตเดเตเดเดฏเตเด, เดฌเดซเดฑเดฟเตฝ เดจเดฟเดจเตเดจเต เดฌเตเดจเดฑเดฟ เดกเดพเดฑเตเดฑ เดซเดฏเดฒเดฟเดฒเตเดเตเดเต เดเดดเตเดคเตเดเดฏเตเด เดเตเดฏเตเดฏเตเด.

1. `buttonPressed` เดซเดเดเตเดทเดจเดฟเตฝ เดฌเดซเตผ เดกเดฟเดฒเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเดคเดฟเดจเต **เดฎเตเดจเตโเดชเดพเดฏเดฟ** `saveToSDCard` เดซเดเดเตเดทเตป เดตเดฟเดณเดฟเดเตเดเตเด:

    ```cpp
    Serial.print("Image read to buffer with length ");
    Serial.println(length);

    saveToSDCard(buffer, length);
    
    delete(buffer);
    ```

1. เดเตเดกเต เดฌเดฟเตฝเดกเต เดเตเดฏเตเดคเต เดเดชเตโเดฒเตเดกเต เดเตเดฏเตเดฏเตเด, เดธเตเดฐเดฟเดฏเตฝ เดฎเตเดฃเดฟเดฑเตเดฑเดฑเดฟเตฝ เดเดเตเดเตเดชเตเดเตเดเต เดชเดฐเดฟเดถเตเดงเดฟเดเตเดเตเด. เดเดฐเต เดคเดตเดฃเดฏเตเด C เดฌเดเตเดเตบ เดเดฎเตผเดคเตเดคเตเดฎเตเดชเตเตพ เดเดฟเดคเตเดฐเด เดชเดเตผเดจเตเดจเต เดชเดฟเดเดฟเดเตเดเตเดเดฏเตเด SD เดเดพเตผเดกเดฟเตฝ เดธเตเดตเต เดเตเดฏเตเดฏเดชเตเดชเตเดเตเดเดฏเตเด เดเตเดฏเตเดฏเตเด.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 16392
    Image written to file 1.jpg
    Image captured
    Image read to buffer with length 14344
    Image written to file 2.jpg
    ```

1. microSD เดเดพเตผเดกเดฟเดจเตเดฑเต เดชเดตเตผ เดเดซเดพเดเตเดเดฟ เดเตเดเตเดเดฟ เดชเตเดฑเดคเตเดคเตเดเตเดเตเดเตเด, เดเดคเต เดชเดฟเตปเดตเดพเดเตเดเดฟ เดชเตเดฑเดคเตเดคเต เดชเดฃเดเตเดเต เดตเดฐเตเด. เดเดคเต เดเตเดฏเตเดฏเดพเตป เดจเดฟเดเตเดเตพเดเตเดเต เดเดฐเต เดเตเดฑเต เดเดชเดเดฐเดฃเด เดเดชเดฏเตเดเดฟเดเตเดเดพเตป เดเดตเดพเด. microSD เดเดพเตผเดกเต เดจเดฟเดเตเดเดณเตเดเต เดเดฎเตเดชเตเดฏเตเดเตเดเดฑเดฟเตฝ เดเดฃเดเตเดฑเตเดฑเต เดเตเดฏเตเดคเต เดเดฟเดคเตเดฐเดเตเดเตพ เดเดพเดฃเตเด.

    ![A picture of a banana captured using the ArduCam](../../../../../translated_images/ml/banana-arducam.be1b32d4267a8194.webp)

    > ๐ เดเตเดฏเดพเดฎเดฑ เดตเตเดเดฟ เดตเตเดฑเตเดฑเต เดฌเดพเดฒเตปเดธเต เดเตเดฐเดฎเตเดเดฐเดฟเดเตเดเดพเตป เดเดฟเดฒ เดเดฟเดคเตเดฐเดเตเดเตพ เดเดเตเดเตเดเตเดฃเตเดเดฟ เดตเดฐเดพเด. เดเดคเดฟเดจเตเดณเตเดณ เดธเตเดเดจเดฏเดพเดฏเดฟ เดเดฟเดคเตเดฐเดเตเดเดณเตเดเต เดจเดฟเดฑเด เดเดฆเตเดฏเดฎเดพเดฏเดฟ เดธเตเดตเดพเดญเดพเดตเดฟเดเดฎเดฒเตเดฒเดพเดคเต เดเดพเดฃเดพเด. เด เดชเตเดฐเดถเตโเดจเด เดชเดฐเดพเดฎเตผเดถเดฟเดเตเดเดพเตป เดจเดฟเดเตเดเตพเดเตเดเต เดธเดเตเดเดฎเดพเดเตเดเดชเตเดชเตเดเตเด `setup` เดซเดเดเตเดทเดจเดฟเตฝ เดเตเดฏเดพเดชเตเดเตผ เดเตเดฏเตเดค เดเดฟเดคเตเดฐเดเตเดเดณเดฟเตฝ เดเดฆเตเดฏ เดเตเดฑเต(ignore) เดฎเดพเดฑเตเดฑเดฟ เดชเตเดเดพเด.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**เดกเดฟเดธเตเดเตเดฒเตเดฏเตเดฎเตผ**:  
เด เดกเตเดเตเดฏเตเดฎเตเดจเตเดฑเต AI เดชเดฐเดฟเดญเดพเดท เดธเตเดตเดจเด [Co-op Translator](https://github.com/Azure/co-op-translator) เดเดชเดฏเตเดเดฟเดเตเดเต เดชเดฐเดฟเดญเดพเดท เดเตเดฏเตเดคเดคเดพเดฃเต. เดจเดพเด เดเตเดคเตเดฏเดคเดฏเตเดเตเดเต เดถเตเดฐเดฎเดฟเดเตเดเตเดตเตเดเตเดเดฟเดฒเตเด, เดเดเตเดเตเดฎเตเดฑเตเดฑเดกเต เดชเดฐเดฟเดญเดพเดทเดเดณเดฟเตฝ เดชเดฟเดถเดเตเดเตพ เดเดฒเตเดฒเตเดเตเดเดฟเตฝไธเดถเตเดฆเตเดงเดฟเดเตพ เดเดฃเตเดเดพเดฏเดฟเดฐเดฟเดเตเดเดพเตป เดธเดพเดงเตเดฏเดคเดฏเตเดฃเตเดเต. เดเดคเดฟเดจเตเดฑเต เดฎเดพเดคเตเดญเดพเดทเดฏเดฟเดฒเต เดเดญเดฟเดฎเตเด เดกเตเดเตเดฏเตเดฎเตเดจเตเดฑเดฟเดจเต เดฎเดพเดคเตเดฐเดฎเต เดเดพเดฐเตเดฏเดธเตเดคเตเดฐเดฎเดพเดฏเดฟ เดเดพเดฃเตเดฃเตเดเดคเตเดณเตเดณเต. เดจเดฟเตผเดฃเดพเดฏเด เดตเดฟเดตเดฐเดเตเดเตพเดเตเดเดพเดฏเดฟ, เดชเตเดฐเตเดซเดทเดฃเตฝ เดฎเดจเตเดทเตเดฏ เดชเดฐเดฟเดญเดพเดท เดจเดฟเตผเดฆเตเดฆเตเดถเดฟเดเตเดเดชเตเดชเตเดเตเดจเตเดจเต. เด เดชเดฐเดฟเดญเดพเดท เดเดชเดฏเตเดเดฟเดเตเดเดคเดฟเดจเดพเตฝ เดเดฃเตเดเดพเดเตเดจเตเดจ เดเดคเตเดชเตเดคเดฟ เดเดฒเตเดฒเตเดเตเดเดฟเตฝ เดคเตเดฑเตเดฑเดฟเดฆเตเดงเดพเดฐเดฃเดเตพเดเตเดเดพเดฏเดฟ เดเดเตเดเตพ เดเดคเตเดคเดฐเดตเดพเดฆเดฟเดคเตเดคเด เดตเดนเดฟเดเตเดเตเดจเตเดจเดฟเดฒเตเดฒ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->