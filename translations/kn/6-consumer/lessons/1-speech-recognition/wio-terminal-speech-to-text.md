# Speech to text - Wio Terminal

‡≤à ‡≤™‡≤æ‡≤†‡≤¶ ‡≤à ‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø, ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤π‡≤ø‡≤°‡≤ø‡≤¶‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å‡≤ï‡≥ä‡≤Ç‡≤° ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤ü‡≥Ü‡≤ï‡≥ç‡≤∏‡≥ç‡≤ü‡≥ç ‡≤ó‡≥Ü ‡≤™‡≤∞‡≤ø‡≤µ‡≤∞‡≥ç‡≤§‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≤ï‡≥ç‡≤ï‡≤æ‡≤ó‡≤ø ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤∞‡≥ç‡≤µ‡≥Ä‡≤∏‡≥ç ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤ï‡≥ã‡≤°‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤∞‡≥Ü‡≤Ø‡≤≤‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤∞‡≤ø.

## ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤∞‡≥ç‡≤µ‡≥Ä‡≤∏‡≥ç ‡≤ó‡≥Ü ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤ø

‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å REST API ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤∞‡≥ç‡≤µ‡≥Ä‡≤∏‡≥ç ‡≤ó‡≥Ü ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤¨‡≤π‡≥Å‡≤¶‡≥Å. ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤∞‡≥ç‡≤µ‡≥Ä‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤≤‡≥Å, ‡≤Æ‡≥ä‡≤¶‡≤≤‡≥Å ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤™‡≥ç‡≤∞‡≤µ‡≥Ü‡≥ï‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤ï‡≥á‡≤≥‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤¨‡≥á‡≤ï‡≥Å, ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤Ü ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤¨‡≤≥‡≤∏‡≤ø REST API ‡≤ó‡≥Ü ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≥Å. ‡≤á‡≤µ‡≥Å 10 ‡≤®‡≤ø‡≤Æ‡≤ø‡≤∑‡≤ó‡≤≥ ‡≤¨‡≤≥‡≤ø‡≤ï ‡≤Ö‡≤µ‡≤ß‡≤ø ‡≤Æ‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≤∞‡≤ø‡≤Ç‡≤¶, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤ï‡≥ã‡≤°‡≥ç ‡≤®‡≤ø‡≤Ø‡≤Æ‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≥á‡≤≥‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤¨‡≥á‡≤ï‡≥Å ‡≤π‡≤æ‡≤ó‡≤æ‡≤ó‡≤ø ‡≤Ö‡≤µ‡≥Å ‡≤Ø‡≤æ‡≤µ‡≤æ‡≤ó‡≤≤‡≥Ç ‡≤®‡≤µ‡≥Ä‡≤ï‡≤∞‡≤ø‡≤∏‡≤≤‡≥ç‡≤™‡≤ü‡≥ç‡≤ü‡≤ø‡≤∞‡≥Å‡≤§‡≥ç‡≤§‡≤µ‡≥Ü.

### ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø - ‡≤™‡≥ç‡≤∞‡≤µ‡≥Ü‡≥ï‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤™‡≤°‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø

1. `smart-timer` ‡≤™‡≥ç‡≤∞‡≤æ‡≤ú‡≥Ü‡≤ï‡≥ç‡≤ü‡≥ç ‡≤à‡≤ó‡≤æ‡≤ó‡≤≤‡≥á ‡¥§‡µÅ‡¥±‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤¶‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü ‡≤§‡≥Ü‡≤∞‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø.

1. WiFi ‡≤ó‡≥Ü ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å JSON ‡≤®‡≤ø‡≤∞‡≥ç‡≤µ‡≤π‡≤£‡≥Ü‡≤ó‡≥Ü `platformio.ini` ‡≤´‡≥à‡≤≤‡≥ç‚Äå‡≤ó‡≥Ü ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤≤‡≥à‡≤¨‡≥ç‡≤∞‡≤∞‡≤ø ‡≤Ö‡≤µ‡≤≤‡≤Ç‡≤¨‡≤®‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```ini
    seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
    seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
    seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    seeed-studio/Seeed Arduino RTC @ 2.0.0
    bblanchon/ArduinoJson @ 6.17.3
    ```

1. `config.h` ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç‚Äå‡≤ó‡≥Ü ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    
    const char *SPEECH_API_KEY = "<API_KEY>";
    const char *SPEECH_LOCATION = "<LOCATION>";
    const char *LANGUAGE = "<LANGUAGE>";

    const char *TOKEN_URL = "https://%s.api.cognitive.microsoft.com/sts/v1.0/issuetoken";
    ```

    `<SSID>` ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å `<PASSWORD>` ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ WiFi ‡≤ó‡≤æ‡≤ó‡≤ø ‡≤∏‡≤Ç‡≤¨‡≤Ç‡≤ß‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤Æ‡≥å‡≤≤‡≥ç‡≤Ø‡≤ó‡≤≥‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤¨‡≤¶‡≤≤‡≤æ‡≤Ø‡≤ø‡≤∏‡≤ø.

    ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤∞‡≥ç‡≤µ‡≥Ä‡≤∏‡≥ç ‡≤∏‡≤Ç‡≤™‡≤®‡≥ç‡≤Æ‡≥Ç‡≤≤‡≤¶ API ‡≤ï‡≥Ä ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∞‡≥Å‡≤µ `<API_KEY>` ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤¶‡≤≤‡≤æ‡≤Ø‡≤ø‡≤∏‡≤ø. ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤∞‡≥ç‡≤µ‡≥Ä‡≤∏‡≥ç ‡≤∏‡≤Ç‡≤™‡≤®‡≥ç‡≤Æ‡≥Ç‡≤≤‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥É‡≤∑‡≥ç‡≤ü‡≤ø‡≤∏‡≤ø‡≤¶‡≤æ‡≤ó ‡≤¨‡≤≥‡≤∏‡≤ø‡≤¶ ‡≤∏‡≥ç‡≤•‡≤≥‡≤µ‡≤®‡≥ç‡≤®‡≥Å `<LOCATION>` ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤¶‡≤≤‡≤æ‡≤Ø‡≤ø‡≤∏‡≤ø.

    ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤≤‡≤ø‡≤∞‡≥Å‡≤µ ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤Ø ‡≤∏‡≥ç‡≤•‡≤≥‡≥Ä‡≤Ø ‡≤π‡≥Ü‡≤∏‡≤∞‡≤ø‡≤® ‡≤π‡≤æ‡≤ó‡≥Ü `<LANGUAGE>` ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤¶‡≤≤‡≤æ‡≤Ø‡≤ø‡≤∏‡≤ø, ‡≤â‡≤¶‡≤æ‡≤π‡≤∞‡≤£‡≥Ü‡≤ó‡≥Ü English ‡≤ó‡≥Ü `en-GB`, ‡≤Ö‡≤•‡≤µ‡≤æ Cantonese ‡≤ó‡≤æ‡≤ó‡≤ø `zn-HK`. ‡≤¨‡≥Ü‡≤Ç‡≤¨‡≤≤‡≤ø‡≤§ ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤ó‡≤≥ ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø‡≤Ø‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ö‡≤µ‡≥Å‡≤ó‡≤≥ ‡≤∏‡≥ç‡≤•‡≤≥‡≥Ä‡≤Ø ‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥Ä‡≤µ‡≥Å [Language and voice support documentation on Microsoft docs](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support?WT.mc_id=academic-17441-jabenn#speech-to-text) ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≤æ‡≤£‡≤¨‡≤π‡≥Å‡≤¶‡≥Å.

    `TOKEN_URL` ‡≤∏‡≥ç‡≤•‡≤ø‡≤∞‡≤æ‡≤Ç‡≤ï‡≤µ‡≥Å ‡≤∏‡≥ç‡≤•‡≤≥‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥ä‡≤∞‡≤§‡≥Å‡≤™‡≤°‡≤ø‡≤∏‡≤ø ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤∞‡≤µ‡≤æ‡≤®‡≤æ‡≤§‡≥É URL ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤≠‡≤∞‡≤ø‡≤§ URL ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≥Å ‡≤∏‡≥ç‡≤•‡≤≥‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ú‡≥ä‡≤§‡≥Ü‡≤ó‡≥Ü ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. Custom Vision ‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≥Å‡≤µ‡≤Ç‡≤§‡≥Ü‡≤Ø‡≥á, ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤∞‡≤µ‡≤æ‡≤®‡≤æ‡≤§‡≥É ‡≤∏‡≥á‡≤µ‡≥Ü‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤≤‡≥Å HTTPS ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. `config.h` ‡≤ï‡≥ä‡≤®‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    const char *TOKEN_CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "MIIF8zCCBNugAwIBAgIQAueRcfuAIek/4tmDg0xQwDANBgkqhkiG9w0BAQwFADBh\r\n"
        "MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\r\n"
        "d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBH\r\n"
        "MjAeFw0yMDA3MjkxMjMwMDBaFw0yNDA2MjcyMzU5NTlaMFkxCzAJBgNVBAYTAlVT\r\n"
        "MR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24xKjAoBgNVBAMTIU1pY3Jv\r\n"
        "c29mdCBBenVyZSBUTFMgSXNzdWluZyBDQSAwNjCCAiIwDQYJKoZIhvcNAQEBBQAD\r\n"
        "ggIPADCCAgoCggIBALVGARl56bx3KBUSGuPc4H5uoNFkFH4e7pvTCxRi4j/+z+Xb\r\n"
        "wjEz+5CipDOqjx9/jWjskL5dk7PaQkzItidsAAnDCW1leZBOIi68Lff1bjTeZgMY\r\n"
        "iwdRd3Y39b/lcGpiuP2d23W95YHkMMT8IlWosYIX0f4kYb62rphyfnAjYb/4Od99\r\n"
        "ThnhlAxGtfvSbXcBVIKCYfZgqRvV+5lReUnd1aNjRYVzPOoifgSx2fRyy1+pO1Uz\r\n"
        "aMMNnIOE71bVYW0A1hr19w7kOb0KkJXoALTDDj1ukUEDqQuBfBxReL5mXiu1O7WG\r\n"
        "0vltg0VZ/SZzctBsdBlx1BkmWYBW261KZgBivrql5ELTKKd8qgtHcLQA5fl6JB0Q\r\n"
        "gs5XDaWehN86Gps5JW8ArjGtjcWAIP+X8CQaWfaCnuRm6Bk/03PQWhgdi84qwA0s\r\n"
        "sRfFJwHUPTNSnE8EiGVk2frt0u8PG1pwSQsFuNJfcYIHEv1vOzP7uEOuDydsmCjh\r\n"
        "lxuoK2n5/2aVR3BMTu+p4+gl8alXoBycyLmj3J/PUgqD8SL5fTCUegGsdia/Sa60\r\n"
        "N2oV7vQ17wjMN+LXa2rjj/b4ZlZgXVojDmAjDwIRdDUujQu0RVsJqFLMzSIHpp2C\r\n"
        "Zp7mIoLrySay2YYBu7SiNwL95X6He2kS8eefBBHjzwW/9FxGqry57i71c2cDAgMB\r\n"
        "AAGjggGtMIIBqTAdBgNVHQ4EFgQU1cFnOsKjnfR3UltZEjgp5lVou6UwHwYDVR0j\r\n"
        "BBgwFoAUTiJUIBiV5uNu5g/6+rkS7QYXjzkwDgYDVR0PAQH/BAQDAgGGMB0GA1Ud\r\n"
        "JQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMHYG\r\n"
        "CCsGAQUFBwEBBGowaDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQu\r\n"
        "Y29tMEAGCCsGAQUFBzAChjRodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGln\r\n"
        "aUNlcnRHbG9iYWxSb290RzIuY3J0MHsGA1UdHwR0MHIwN6A1oDOGMWh0dHA6Ly9j\r\n"
        "cmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RHMi5jcmwwN6A1oDOG\r\n"
        "MWh0dHA6Ly9jcmw0LmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RHMi5j\r\n"
        "cmwwHQYDVR0gBBYwFDAIBgZngQwBAgEwCAYGZ4EMAQICMBAGCSsGAQQBgjcVAQQD\r\n"
        "AgEAMA0GCSqGSIb3DQEBDAUAA4IBAQB2oWc93fB8esci/8esixj++N22meiGDjgF\r\n"
        "+rA2LUK5IOQOgcUSTGKSqF9lYfAxPjrqPjDCUPHCURv+26ad5P/BYtXtbmtxJWu+\r\n"
        "cS5BhMDPPeG3oPZwXRHBJFAkY4O4AF7RIAAUW6EzDflUoDHKv83zOiPfYGcpHc9s\r\n"
        "kxAInCedk7QSgXvMARjjOqdakor21DTmNIUotxo8kHv5hwRlGhBJwps6fEVi1Bt0\r\n"
        "trpM/3wYxlr473WSPUFZPgP1j519kLpWOJ8z09wxay+Br29irPcBYv0GMXlHqThy\r\n"
        "8y4m/HyTQeI2IMvMrQnwqPpY+rLIXyviI2vLoI+4xKE4Rn38ZZ8m\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

    ‡≤á‡≤¶‡≥Å Custom Vision ‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤ø‡≤¶‡≤æ‡≤ó ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤≥‡≤ï‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶ ‡≤Ö‡≤¶‡≥á ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞.

1. `main.cpp` ‡≤´‡≥à‡≤≤‡≥çÈ°∂ÈÉ®‡≤ï‡≥ç‡≤ï‡≥Ü WiFi ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å config ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤á‡≤®‡≥ç‚Äå‡≤ï‡≥ç‡≤≤‡≥Ç‡≤°‡≥ç ‡≤Ü‡≤óÌïòÎèÑÎ°ù ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    #include <rpcWiFi.h>

    #include "config.h"
    ```

1. `main.cpp` ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø `setup` ‡≤´‡≤Ç‡≤ï‡≥ç‡≤∑‡≤®‡≥ç ‡≤Æ‡≥Ä‡≤∞‡≤ø‡≤¶ ‡≤Æ‡≥á‡≤≤‡≥Ü WiFi ‡≤ó‡≥Ü ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ø‡≤∏‡≤≤‡≥Å ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

1. ‡≤∏‡≤∞‡≤£‡≤ø ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï ‡≤Æ‡≤æ‡≤°‡≤≤‡≥ç‡≤™‡≤ü‡≥ç‡≤ü ‡≤®‡≤Ç‡≤§‡≤∞ `setup` ‡≤´‡≤Ç‡≤ï‡≥ç‡≤∑‡≤®‡≤ø‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤à ‡≤´‡≤Ç‡≤ï‡≥ç‡≤∑‡≤®‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø:

    ```cpp
    connectWiFi();
    ```

1. `src` ‡≤´‡≥ã‡≤≤‡≥ç‡≤°‡≤∞‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø `speech_to_text.h` ‡≤é‡≤Ç‡≤¨ ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤π‡≥ä‡≤∏‡≤¶‡≤æ‡≤ó‡≤ø ‡≤∏‡≥É‡≤∑‡≥ç‡≤†‡≤ø‡≤∏‡≤ø. ‡≤à ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    #pragma once
    
    #include <Arduino.h>
    #include <ArduinoJson.h>
    #include <HTTPClient.h>
    #include <WiFiClientSecure.h>
    
    #include "config.h"
    #include "mic.h"
    
    class SpeechToText
    {
    public:

    private:

    };

    SpeechToText speechToText;
    ```

    ‡≤á‡≤¶‡≥Å HTTP ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤ï‡≥Ü‡≤≤‡≤µ‡≥Å ‡≤Ö‡≤µ‡≤∂‡≥ç‡≤Ø‡≤ï ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç‚Äå‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å, ‡≤∏‡≤Ç‡≤∞‡≤ö‡≤®‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å `mic.h` ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤≥‡≤ó‡≥ä‡≤Ç‡≤°‡≤ø‡≤¶‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å `SpeechToText` ‡≤é‡≤Ç‡≤¨ ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡∏ô‡∏¥‡≤∞\u200d‡≤Ø‡≤Æ‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤π‡≤æ‡≤ó‡≥Å ‡≤Ü ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤® ‡≤á‡≤®‡≥ç‚Äå‡≤∏‡≥ç‡≤ü‡≥Ü‡≤®‡≥ç‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≤≤‡≥Å ‡≤ò‡≥ã‡≤∑‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. ‡≤à ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤® `private` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® 2 ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    WiFiClientSecure _token_client;
    String _access_token;
    ```

    `_token_client` ‡≤é‡≤Ç‡≤¶‡≤∞‡≥Ü HTTPS ‡≤¨‡≤≥‡≤∏‡≤ø WiFi Client ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥Å, ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≥Å ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤Ü ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Ç‡≤§‡≤∞ `_access_token` ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∏‡≤Ç‡≤ó‡≥ç‡≤∞‡≤π‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. `private` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤à ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    String getAccessToken()
    {
        char url[128];
        sprintf(url, TOKEN_URL, SPEECH_LOCATION);
    
        HTTPClient httpClient;
        httpClient.begin(_token_client, url);
    
        httpClient.addHeader("Ocp-Apim-Subscription-Key", SPEECH_API_KEY);
        int httpResultCode = httpClient.POST("{}");
    
        if (httpResultCode != 200)
        {
            Serial.println("Error getting access token, trying again...");
            delay(10000);
            return getAccessToken();
        }
    
        Serial.println("Got access token.");
        String result = httpClient.getString();
    
        httpClient.end();
    
        return result;
    }
    ```

    ‡≤à ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤∏‡≤Ç‡≤™‡≤®‡≥ç‡≤Æ‡≥Ç‡≤≤‡≤¶ ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤∞‡≤µ‡≤æ‡≤®‡≤æ‡≤§‡≥É API ‡≤ó‡≤æ‡≤ó‡≤ø URL ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤∞‡≤ö‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤®‡≤Ç‡≤§‡≤∞ WiFi ‡≤ï‡≥ç‡≤≤‡≤Ø‡≤Ç‡≤ü‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤é‡≤Ç‡≤°‡≥ç‚Äå‡≤™‡≤æ‡≤Ø‡≤ø‡≤Ç‡≤ü‡≥ç ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞‡≤¶‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∏‡≤ø HTTPClient ‡≤∞‡≤ö‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. API ‡≤ï‡≥Ä ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤∞‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤Ü‡≤ó‡≤ø ‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß‡≤™‡≤°‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤®‡≤Ç‡≤§‡≤∞ POST ‡≤µ‡≤ø‡≤®‡≤Ç‡≤§‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞ ‡≤™‡≤°‡≥Ü‡≤Ø‡≥Å‡≤µ ‡≤§‡≤®‡≤ï ‡≤Æ‡≤∞‡≥Å‡≤™‡≥ç‡≤∞‡≤Ø‡≤§‡≥ç‡≤® ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤ï‡≥ä‡≤®‡≥Ü‡≤ó‡≥Ü ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. `public` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø, ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≥Å ‡≤µ‡≤ø‡≤ß‡≤æ‡≤® ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø. ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≤ø‡≤® ‡≤™‡≤æ‡≤†‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤á‡≤¶‡≥Å ‡≤™‡≤†‡≥ç‡≤Ø‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤ó‡≥Ü ‡≤™‡≤∞‡≤ø‡≤µ‡≤∞‡≥ç‡≤§‡≤ø‡≤∏‡≤≤‡≥Å ‡≤¨‡≥á‡≤ï‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    ```cpp
    String AccessToken()
    {
        return _access_token;
    }
    ```

1. `public` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø, ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤ï‡≥ç‡≤≤‡≤Ø‡≤Ç‡≤ü‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Ç‡≤∞‡≤ö‡≤ø‡≤∏‡≥Å‡≤µ `init` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤® ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    void init()
    {
        _token_client.setCACert(TOKEN_CERTIFICATE);
        _access_token = getAccessToken();
    }
    ```

    ‡≤á‡≤¶‡≥Å WiFi ‡≤ï‡≥ç‡≤≤‡≤Ø‡≤Ç‡≤ü‡≥ç ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥Ü‡≤ü‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø, ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤™‡≤°‡≥Ü‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. `main.cpp` ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤à ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤á‡≤®‡≥ç‚Äå‡≤ï‡≥ç‡≤≤‡≥Ç‡≤°‡≥ç ‡≤®‡≤ø‡≤∞‡≥ç‡≤¶‡≥á‡≤∂‡≤®‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    #include "speech_to_text.h"
    ```

1. `setup` ‡≤´‡≤Ç‡≤ï‡≥ç‡≤∑‡≤®‡≥ç ‡≤ï‡≥ä‡≤®‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø `mic.init` ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å `Ready` ‡≤∏‡≤∞‡≤£‡≤ø ‡¶Æ‡¶®‡≤ø‡≤ü‡≤∞‡≥ç ‡≤ó‡≥Ü ‡≤¨‡≤∞‡≥Ü‡≤Ø‡≥Å‡≤µ ‡≤Æ‡≥Å‡≤®‡≥ç‡≤® `SpeechToText` ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≤æ‡≤∞‡≤Ç‡≤≠‡≤ø‡≤∏‡≤ø:

    ```cpp
    speechToText.init();
    ```

### ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø - ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤ì‡≤¶‡≤ø

1. ‡≤à ‡≤™‡≤æ‡≤†‡≤¶ ‡≤Æ‡≥ä‡≤¶‡≤≤‡≥Å ‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø, ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¶‡≤æ‡≤ñ‡≤≤‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤§‡≥ç‡≤§‡≥Å. ‡≤à ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å Speech Services REST API ‡≤ó‡≥Ü ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü, ‡≤Ü‡≤¶‡≥ç‡≤¶‡≤∞‡≤ø‡≤Ç‡≤¶ ‡≤Ö‡≤¶‡≤®‡≥ç‡≤®‡≥Å ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤ì‡≤¶‡≤¨‡≥á‡≤ï‡≥Å. ‡≤Ö‡≤¶‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤Æ‡≤∞‡≤£‡≥Ü ‡≤é‡≤Ç‡≤¨ ‡≤¨‡≤´‡≤∞‡≥ç ‡≤ó‡≥Ü ‡≤§‡≥Å‡≤Ç‡≤¨‡≤≤‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤ ‡≤è‡≤ï‡≥Ü‡≤Ç‡≤¶‡≤∞‡≥Ü ‡≤Ö‡≤¶‡≥Å ‡≤¨‡≤π‡≤≥ ‡≤¶‡≥ä‡≤°‡≥ç‡≤°‡≤¶‡≥Å. REST ‡≤ï‡≤æ‡≤≤‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ `HTTPClient` ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Æ‡≤æ‡≤°‡≤¨‡≤π‡≥Å‡≤¶‡≥Å, ‡≤Ö‡≤Ç‡≤¶‡≤∞‡≥Ü Arduino Stream - ‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥Å ‡≤∏‡≤£‡≥ç‡≤£ ‡≤§‡≥Å‡≤Ç‡≤°‡≥Å‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ì‡≤¶‡≤ø ‡≤Ö‡≤¶‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤∏‡≤Æ‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤§‡≥Å‡≤Ç‡≤°‡≤æ‡≤ó‡≤ø ‡≤µ‡≤ø‡≤®‡≤Ç‡≤§‡≤ø‡≤Ø ‡≤≠‡≤æ‡≤ó‡≤µ‡≤æ‡≤ó‡≤ø ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤™‡≥ç‡≤∞‡≤§‡≤ø ‡≤¨‡≤æ‡≤∞‡≤ø ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Æ‡≥á‡≤≤‡≥Ü `read` ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶‡≤æ‡≤ó ‡≤Ö‡≤¶‡≥Å ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≤ø‡≤® ‡≤°‡≥á‡≤ü‡≤æ ‡≤¨‡≤æ‡≤ï‡≥ç‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤ì‡≤¶‡≥Å‡≤µ Arduino ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥É‡≤∑‡≥ç‡≤†‡≤ø‡≤∏‡≤ø. `src` ‡≤´‡≥ã‡≤≤‡≥ç‡≤°‡≤∞‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø `flash_stream.h` ‡≤é‡≤Ç‡≤¨ ‡≤π‡≥ä‡≤∏ ‡≤´‡≥à‡≤≤‡≥ç ‡≤∏‡≥É‡≤∑‡≥ç‡≤ü‡≤ø‡≤∏‡≤ø, ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ö‡≤¶‡≥Å ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    #pragma once
    
    #include <Arduino.h>
    #include <HTTPClient.h>
    #include <sfud.h>

    #include "config.h"
    
    class FlashStream : public Stream
    {
    public:
        virtual size_t write(uint8_t val)
        {    
        }
    
        virtual int available()
        {
        }
    
        virtual int read()
        {
        }
    
        virtual int peek()
        {
        }
    private:
    
    };
    ```

    ‡≤á‡≤¶‡≥Å Arduino `Stream` ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤®‡≤ø‡≤Ç‡≤¶ ‡≤µ‡≤Ç‡≤∂‡≤æ‡≤®‡≥Å‡≤ï‡≥ç‡≤∞‡≤Æ‡≤£ ‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ `FlashStream` ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ò‡≥ã‡≤∑‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤á‡≤¶‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤Ö‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≤ø‡≤§ ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥Å- derived ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤ï‡≥Ü‡≤≤‡≤µ‡≥Å ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤ø‡≤∞‡≥ç‡≤µ‡≤π‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤á‡≤¶‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤Æ‡≥Å‡≤Ç‡≤ö‡≥Ü ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤â‡≤¶‡≥ç‡≤ò‡≤æ‡≤ü‡≤ø‡≤∏‡≤≤‡≥Å, ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ü ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤ó‡≤≥‡≥Å ‡≤à ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≤ø‡≤∞‡≥ç‡≤ß‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.

    ‚úÖ Arduino Stream ‡≤ó‡≤≥ ‡≤¨‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≥Å ‡≤ì‡≤¶‡≤≤‡≥Å [Arduino Stream documentation](https://www.arduino.cc/reference/en/language/functions/communication/stream/) ‡≤§‡≤æ‡≤£‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥ã‡≤°‡≤ø

1. `private` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    size_t _pos;
    size_t _flash_address;
    const sfud_flash *_flash;

    byte _buffer[HTTP_TCP_BUFFER_SIZE];
    ```

    ‡≤á‡≤¶‡≥Å ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤ì‡≤¶‡≤ø‡≤¶ ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Ç‡≤ó‡≥ç‡≤∞‡≤π‡≤ø‡≤∏‡≥Å‡≤µ ‡≤§‡≤æ‡≤§‡≥ç‡≤ï‡≤æ‡≤≤‡≤ø‡≤ï ‡≤¨‡≤´‡≤∞‡≥ç ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤¨‡≤´‡≤∞‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ì‡≤¶‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≥Å‡≤µ‡≤æ‡≤ó ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤∏‡≥ç‡≤•‡≤æ‡≤®‡≤Æ‡≤æ‡≤®, ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤ì‡≤¶‡≤≤‡≥Å ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤µ‡≤ø‡≤≥‡≤æ‡≤∏ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø ‡≤∏‡≤æ‡≤ß‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Ç‡≤ó‡≥ç‡≤∞‡≤π‡≤ø‡≤∏‡≥Å‡≤µ ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤ø‡≤∞‡≥ç‡≤µ‡≤π‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. `private` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    void populateBuffer()
    {
        sfud_read(_flash, _flash_address, HTTP_TCP_BUFFER_SIZE, _buffer);
        _flash_address += HTTP_TCP_BUFFER_SIZE;
        _pos = 0;
    }
    ```

    ‡≤à ‡≤ï‡≥ã‡≤°‡≥ç ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤µ‡≤ø‡≤≥‡≤æ‡≤∏‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤ì‡≤¶‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤´‡≤∞‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∏‡≤Ç‡≤ó‡≥ç‡≤∞‡≤π‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤µ‡≤ø‡≤≥‡≤æ‡≤∏‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü, ‡≤Ü‡≤¶‡≥ç‡≤¶‡≤∞‡≤ø‡≤Ç‡≤¶ ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≤ø‡≤® ‡≤ï‡≤æ‡≤≤‡≥ç ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≤ø‡≤® ‡≤§‡≥Å‡≤Ç‡≤°‡≤®‡≥ç‡≤®‡≥Å ‡≤ì‡≤¶‡≥Å‡≤µ‡≤Ç‡≤§‡≥Ü ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤¨‡≤´‡≤∞‡≥ç ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å REST API ‡≤ó‡≥Ü ‡≤í‡≤Ç‡≤¶‡≥á ‡≤∏‡≤Æ‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø HTTPClient ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≥Å‡≤µ ‡≤¶‡≥ä‡≤°‡≥ç‡≤° ‡≤Æ‡≤ó‡≥Å‡≤ü‡≤ø‡≤® ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞ ‡≤Ü‡≤ß‡≤æ‡≤∞‡≤¶ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤®‡≤ø‡≤∞‡≥ç‡≤ß‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.

    > üíÅ ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤≥‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å ‡≤ó‡≥ç‡≤∞‡≥á‡≤®‡≥ç ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞ ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤Æ‡≤æ‡≤°‡≤¨‡≥á‡≤ï‡≥Å, ‡≤ì‡≤¶‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å ‡≤π‡≤æ‡≤ó‡≤æ‡≤ó‡≤¨‡≥á‡≤ï‡≥Å ‡≤Ö‡≤®‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å ‡≤Ö‡≤≤‡≥ç‡≤≤.

1. ‡≤à ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤® `public` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≤ø‡≤∞‡≥ç‡≤Æ‡≤æ‡≤™‡≤ï (constructor) ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    FlashStream()
    {
        _pos = 0;
        _flash_address = 0;
        _flash = sfud_get_device_table() + 0;
        
        populateBuffer();
    }
    ```

    ‡≤à ‡≤®‡≤ø‡≤∞‡≥ç‡≤Æ‡≤æ‡≤™‡≤ï ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥Ç‡≤ö‡≤ø‡≤∏‡≤ø‡≤¶‡≤Ç‡≤§‡≥Ü ‡≤Ü‡≤∞‡≤Ç‡≤≠‡≤ø‡≤∏‡≤ø ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤Æ‡≥Ü‡≤Æ‡≥ä‡≤∞‡≤ø ‡≤¨‡≥ç‡≤≤‡≤æ‡≤ï‡≥ç ‡≤® ‡≤Ü‡≤∞‡≤Ç‡≤≠‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤ì‡≤¶‡≤≤‡≥Å ‡≤™‡≥ç‡≤∞‡≤æ‡≤∞‡≤Ç‡≤≠‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤¨‡≤´‡≤∞‡≥ç ‡≤ó‡≥Ü ‡≤Æ‡≥ä‡≤¶‡≤≤ ‡≤§‡≥Å‡≤Ç‡≤°‡≥Å ‡≤°‡≥á‡≤ü‡≤æ ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. `write` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ú‡≤æ‡≤∞‡≤ø‡≤Æ‡≤æ‡≤°‡≤ø (implement) ‡≤Æ‡≤æ‡≤°‡≤ø. ‡≤à ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Æ‡≤π‡≤§‡≥ç‡≤µ‡≤™‡≥Ç‡≤∞‡≥ç‡≤£‡≤µ‡≤æ‡≤ó‡≤ø ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ì‡≤¶‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü, ‡≤Ü‡≤¶‡≥ç‡≤¶‡≤∞‡≤ø‡≤Ç‡≤¶ ‡≤á‡≤¶‡≥Å ‡≤è‡≤®‡≥Ç ‡≤Æ‡≤æ‡≤°‡≤¶‡≥Ü 0 ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≤¨‡≤π‡≥Å‡≤¶‡≥Å:

    ```cpp
    virtual size_t write(uint8_t val)
    {
        return 0;
    }
    ```

1. `peek` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ú‡≤æ‡≤∞‡≤ø‡≤Æ‡≤æ‡≤°‡≤ø. ‡≤á‡≤¶‡≥Å ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤∏‡≥ç‡≤•‡≤æ‡≤®‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤Ü‡≤¶‡≤∞‡≥Ü ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≥Ü ‡≤∏‡≤æ‡≤ó‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤. ‡≤á‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤≤‡≤µ‡≤æ‡≤∞‡≥Å ‡≤¨‡≤æ‡≤∞‡≤ø ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶‡≤∞‡≥Ç ‡≤Ö‡≤®‡≥á‡≤ï ‡≤ì‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü ‡≤í‡≤Ç‡≤¶‡≥á ‡≤°‡≥á‡≤ü‡≤æ ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    ```cpp
    virtual int peek()
    {
        return _buffer[_pos];
    }
    ```

1. `available` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ú‡≤æ‡≤∞‡≤ø‡≤Æ‡≤æ‡≤°‡≤ø. ‡≤á‡≤¶‡≥Å ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ì‡≤¶‡≤¨‡≤π‡≥Å‡≤¶‡≤æ‡≤¶ ‡≤¨‡≥à‡≤ü‡≥ç ‡≤ó‡≤≥ ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü, ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Æ‡≥Å‡≤ó‡≤ø‡≤¶‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü -1 ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥Ä‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤à ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤ó‡≤æ‡≤ó‡≤ø ‡≤ó‡≤∞‡≤ø‡≤∑‡≥ç‡≤† ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤∞‡≥Å‡≤µ ‡≤¨‡≥Ü‡≤≥‡≤µ‡≤£‡≤ø‡≤ó‡≥Ü HTTPClient ‡≤® ‡≤Æ‡≤ó‡≥Å‡≤ü‡≤ø‡≤® ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≥Ä‡≤∞‡≤¶‡≥Å. HTTPClient ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≤ø‡≤¶‡≤æ‡≤ó ‡≤à ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤∞‡≥Ü‡≤¶‡≥Å ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤∞‡≥Å‡≤µ ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø, ‡≤®‡≤Ç‡≤§‡≤∞ REST API ‡≤ó‡≥Ü ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤≤‡≥Å ‡≤Ü‡≤∑‡≥ç‡≤ü‡≥Å ‡≤°‡≥á‡≤ü‡≤æ‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤µ‡≤ø‡≤®‡≤Ç‡≤§‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≥Å ‡≤á‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü ‡≤Æ‡≤ó‡≥Å‡≤ü‡≤ø‡≤® ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü, ‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤á‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤∞‡≥Å‡≤µ‡≤∑‡≥ç‡≤ü‡≥Å ‡≤¨‡≤ø‡≤§‡≥ç‡≤§‡≤∞‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤é‡≤≤‡≥ç‡≤≤ ‡≤°‡≥á‡≤ü‡≤æ ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Ü‡≤¶ ‡≤Æ‡≥á‡≤≤‡≥Ü -1 ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    ```cpp
    virtual int available()
    {
        int remaining = BUFFER_SIZE - ((_flash_address - HTTP_TCP_BUFFER_SIZE) + _pos);
        int bytes_available = min(HTTP_TCP_BUFFER_SIZE, remaining);

        if (bytes_available == 0)
        {
            bytes_available = -1;
        }

        return bytes_available;
    }
    ```

1. `read` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ú‡≤æ‡≤∞‡≤ø‡≤Æ‡≤æ‡≤°‡≤ø. ‡≤á‡≤¶‡≥Å ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≤ø‡≤® ‡≤¨‡≤´‡≤∞‡≥ç ‡≤® ‡≤¨‡≥à‡≤ü‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≥ç‡≤•‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤∏‡≥ç‡≤•‡≤æ‡≤® ‡≤¨‡≤´‡≤∞‡≥ç ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞ ‡≤Æ‡≥ä‡≤¶‡≤≤‡≥Å ‡≤Æ‡≥Ä‡≤∞‡≤ø‡≤¶‡≤∞‡≥Ü, ‡≤Æ‡≥Å‡≤Ç‡≤¶‡≥Ü ‡≤´‡≥ç‡≤≤‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç ‡≤ü‡≥Å‡≤Ç‡≤°‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤´‡≤∞‡≥ç ‡≤ó‡≥Ü ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø ‡≤∏‡≥ç‡≤•‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥Å‡≤®‡≤É ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    ```cpp
    virtual int read()
    {
        int retVal = _buffer[_pos++];

        if (_pos == HTTP_TCP_BUFFER_SIZE)
        {
            populateBuffer();
        }

        return retVal;
    }
    ```

1. `speech_to_text.h` ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤à ‡≤π‡≥ä‡≤∏ ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤∞‡≤ø‡≤Ç‡≤¶ ‡≤á‡≤®‡≥ç‚Äå‡≤ï‡≥ç‡≤≤‡≥Ç‡≤°‡≥ç ‡≤®‡≤ø‡≤∞‡≥ç‡≤¶‡≥á‡≤∂‡≤® ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    #include "flash_stream.h"
    ```

### ‡≤ï‡≤æ‡≤∞‡≥ç‡≤Ø - ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤†‡≥ç‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤™‡≤∞‡≤ø‡≤µ‡≤∞‡≥ç‡≤§‡≤ø‡≤∏‡≤ø

1. ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤†‡≥ç‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü speech service REST API ‡≤Æ‡≥Ç‡≤≤‡≤ï ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≥Å‡≤µ ‡≤Æ‡≥Ç‡≤≤‡≤ï ‡≤™‡≤∞‡≤ø‡≤µ‡≤∞‡≥ç‡≤§‡≤ø‡≤∏‡≤¨‡≤π‡≥Å‡≤¶‡≥Å. ‡≤à REST API ‡≤ó‡≥Ü ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤∞‡≤µ‡≤æ‡≤®‡≤æ‡≤§‡≥É‡≤ó‡≥Ü ‡≤á‡≤∞‡≥Å‡≤µ ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞‡≤ï‡≥ç‡≤ï‡≤ø‡≤Ç‡≤§ ‡≤µ‡≤ø‡≤≠‡≤ø‡≤®‡≥ç‡≤® ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞‡≤µ‡≤ø‡≤¶‡≥Ü, ‡≤Ü‡≤¶‡≥ç‡≤¶‡≤∞‡≤ø‡≤Ç‡≤¶ `config.h` ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç‚Äå‡≤ó‡≥Ü ‡≤à ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤Ç‡≤ú‡≥ç‡≤ú‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≥Å‡≤µ ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    const char *SPEECH_CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "MIIF8zCCBNugAwIBAgIQCq+mxcpjxFFB6jvh98dTFzANBgkqhkiG9w0BAQwFADBh\r\n"
        "MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\r\n"
        "d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBH\r\n"
        "MjAeFw0yMDA3MjkxMjMwMDBaFw0yNDA2MjcyMzU5NTlaMFkxCzAJBgNVBAYTAlVT\r\n"
        "MR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24xKjAoBgNVBAMTIU1pY3Jv\r\n"
        "c29mdCBBenVyZSBUTFMgSXNzdWluZyBDQSAwMTCCAiIwDQYJKoZIhvcNAQEBBQAD\r\n"
        "ggIPADCCAgoCggIBAMedcDrkXufP7pxVm1FHLDNA9IjwHaMoaY8arqqZ4Gff4xyr\r\n"
        "RygnavXL7g12MPAx8Q6Dd9hfBzrfWxkF0Br2wIvlvkzW01naNVSkHp+OS3hL3W6n\r\n"
        "l/jYvZnVeJXjtsKYcXIf/6WtspcF5awlQ9LZJcjwaH7KoZuK+THpXCMtzD8XNVdm\r\n"
        "GW/JI0C/7U/E7evXn9XDio8SYkGSM63aLO5BtLCv092+1d4GGBSQYolRq+7Pd1kR\r\n"
        "EkWBPm0ywZ2Vb8GIS5DLrjelEkBnKCyy3B0yQud9dpVsiUeE7F5sY8Me96WVxQcb\r\n"
        "OyYdEY/j/9UpDlOG+vA+YgOvBhkKEjiqygVpP8EZoMMijephzg43b5Qi9r5UrvYo\r\n"
        "o19oR/8pf4HJNDPF0/FJwFVMW8PmCBLGstin3NE1+NeWTkGt0TzpHjgKyfaDP2tO\r\n"
        "4bCk1G7pP2kDFT7SYfc8xbgCkFQ2UCEXsaH/f5YmpLn4YPiNFCeeIida7xnfTvc4\r\n"
        "7IxyVccHHq1FzGygOqemrxEETKh8hvDR6eBdrBwmCHVgZrnAqnn93JtGyPLi6+cj\r\n"
        "WGVGtMZHwzVvX1HvSFG771sskcEjJxiQNQDQRWHEh3NxvNb7kFlAXnVdRkkvhjpR\r\n"
        "GchFhTAzqmwltdWhWDEyCMKC2x/mSZvZtlZGY+g37Y72qHzidwtyW7rBetZJAgMB\r\n"
        "AAGjggGtMIIBqTAdBgNVHQ4EFgQUDyBd16FXlduSzyvQx8J3BM5ygHYwHwYDVR0j\r\n"
        "BBgwFoAUTiJUIBiV5uNu5g/6+rkS7QYXjzkwDgYDVR0PAQH/BAQDAgGGMB0GA1Ud\r\n"
        "JQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMHYG\r\n"
        "CCsGAQUFBwEBBGowaDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQu\r\n"
        "Y29tMEAGCCsGAQUFBzAChjRodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGln\r\n"
        "aUNlcnRHbG9iYWxSb290RzIuY3J0MHsGA1UdHwR0MHIwN6A1oDOGMWh0dHA6Ly9j\r\n"
        "cmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RHMi5jcmwwN6A1oDOG\r\n"
        "MWh0dHA6Ly9jcmw0LmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RHMi5j\r\n"
        "cmwwHQYDVR0gBBYwFDAIBgZngQwBAgEwCAYGZ4EMAQICMBAGCSsGAQQBgjcVAQQD\r\n"
        "AgEAMA0GCSqGSIb3DQEBDAUAA4IBAQAlFvNh7QgXVLAZSsNR2XRmIn9iS8OHFCBA\r\n"
        "WxKJoi8YYQafpMTkMqeuzoL3HWb1pYEipsDkhiMnrpfeYZEA7Lz7yqEEtfgHcEBs\r\n"
        "K9KcStQGGZRfmWU07hPXHnFz+5gTXqzCE2PBMlRgVUYJiA25mJPXfB00gDvGhtYa\r\n"
        "+mENwM9Bq1B9YYLyLjRtUz8cyGsdyTIG/bBM/Q9jcV8JGqMU/UjAdh1pFyTnnHEl\r\n"
        "Y59Npi7F87ZqYYJEHJM2LGD+le8VsHjgeWX2CJQko7klXvcizuZvUEDTjHaQcs2J\r\n"
        "+kPgfyMIOY1DMJ21NxOJ2xPRC/wAh/hzSBRVtoAnyuxtkZ4VjIOh\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

1. ‡≤à ‡≤´‡≥à‡≤≤‡≥ç ‡≤ó‡≥Ü ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤á‡≤≤‡≥ç‡≤≤‡≤¶‡≥Ü ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç URL ‡≤á‡≤Ç‡≤¶ ‡≤∏‡≥ç‡≤•‡≤ø‡≤∞‡≤æ‡≤Ç‡≤ï ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø. ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤∏‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø ‡≤™‡≥Ç‡≤∞‡≥ç‡≤£ URL ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    ```cpp
    const char *SPEECH_URL = "https://%s.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1?language=%s";
    ```

1. `speech_to_text.h` ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤´‡≥à‡≤≤‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø `SpeechToText` ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤® `private` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤à ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞ ‡≤¨‡≤≥‡≤∏‡≤ø WiFi Client ‡≤® ‡≤ï‡≥ç‡≤∑‡≥á‡≤§‡≥ç‡≤∞ ‡≤ò‡≥ã‡≤∑‡≤ø‡≤∏‡≤ø:

    ```cpp
    WiFiClientSecure _speech_client;
    ```

1. `init` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤à WiFi Client ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥Ü‡≤ö‡≥ç‡≤ö‡≤ø‡≤∏‡≤ø:

    ```cpp
    _speech_client.setCACert(SPEECH_CERTIFICATE);
    ```

1. `SpeechToText` ‡≤ï‡≥ç‡≤≤‡≤æ‡≤∏‡≥ç ‡≤® `public` ‡≤µ‡≤ø‡≤≠‡≤æ‡≤ó‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤†‡≥ç‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤™‡≤∞‡≤ø‡≤µ‡≤∞‡≥ç‡≤§‡≤ø‡≤∏‡≤≤‡≥Å ‡≤à ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    String convertSpeechToText()
    {
        
    }
    ```

1. ‡≤à ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø WiFi Client ‡≤¨‡≤≥‡≤∏‡≤ø HTTPClient ‡≤∞‡≤ö‡≤ø‡≤∏‡≤ø, ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≤™‡≤§‡≥ç‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤Ø‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∏‡≤≤‡≤æ‡≤¶ ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç URL ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≤ø ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    char url[128];
    sprintf(url, SPEECH_URL, SPEECH_LOCATION, LANGUAGE);

    HTTPClient httpClient;
    httpClient.begin(_speech_client, url);
    ```

1. ‡≤ï‡≥Ü‡≤≤‡≤µ‡≥Å ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç ‡≤ó‡≤≥‡≥Å ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß‡≤™‡≤°‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≤æ‡≤ó‡≤ø‡≤µ‡≥Ü:

    ```cpp
    httpClient.addHeader("Authorization", String("Bearer ") + _access_token);
    httpClient.addHeader("Content-Type", String("audio/wav; codecs=audio/pcm; samplerate=") + String(RATE));
    httpClient.addHeader("Accept", "application/json;text/xml");
    ```

    ‡≤á‡≤¶‡≥Å ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£‡≥Ä‡≤ï‡≤∞‡≤£ ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç, ‡≤ï‡≥á‡≤≥‡≤ø‡≤¶ ‡≤®‡≥Å‡≤°‡≤ø‡≤µ‡≤ø‡≤® ‡≤Æ‡≤æ‡≤¶‡≤∞‡≤ø ‡≤π‡≤æ‡≤ó‡≥Å ‡≤Æ‡≤æ‡≤¶‡≤∞‡≤ø ‡≤¶‡≤∞ ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø ‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤ü‡≥ç ‡≤π‡≥Ü‡≤°‡≤∞‡≥ç, ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂ JSON ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥Å‡≤Ç‡≤¨ ‡≤Ö‡≤µ‡≤ï‡≤æ‡≤∂ ‡≤∏‡≥Ü‡≤ü‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. ‡≤Ö‡≤¶‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤®‡≤Ç‡≤§‡≤∞ REST API ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    Serial.println("Sending speech...");

    FlashStream stream;
    int httpResponseCode = httpClient.sendRequest("POST", &stream, BUFFER_SIZE);

    Serial.println("Speech sent!");
    ```

    ‡≤á‡≤¶‡≥Å `FlashStream` ‡≤∏‡≥É‡≤∑‡≥ç‡≤ü‡≤ø‡≤∏‡≤ø REST API ‡≤ó‡≥Ü ‡≤°‡≥á‡≤ü‡≤æ ‡≤∏‡≥ç‡≤ü‡≥ç‡≤∞‡≥Ä‡≤Æ‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. ‡≤á‡≤¶‡≤∞ ‡≤ï‡≥Ü‡≤≥‡≤ó‡≥Ü ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    String text = "";

    if (httpResponseCode == 200)
    {
        String result = httpClient.getString();
        Serial.println(result);

        DynamicJsonDocument doc(1024);
        deserializeJson(doc, result.c_str());

        JsonObject obj = doc.as<JsonObject>();
        text = obj["DisplayText"].as<String>();
    }
    else if (httpResponseCode == 401)
    {
        Serial.println("Access token expired, trying again with a new token");
        _access_token = getAccessToken();
        return convertSpeechToText();
    }
    else
    {
        Serial.print("Failed to convert text to speech - error ");
        Serial.println(httpResponseCode);
    }
    ```

    ‡≤à ‡≤ï‡≥ã‡≤°‡≥ç ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ ‡≤ï‡≥ã‡≤°‡≥ç ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    200 ‡≤é‡≤Ç‡≤¶‡≤∞‡≥Ü ‡≤Ø‡≤∂‡≤∏‡≥ç‡≤∏‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤Ü‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥Å, ‡≤´‡≤≤‡≤ø‡≤§‡≤æ‡≤Ç‡≤∂‡≤µ‡≤®‡≥ç‡≤®‡≥Å JSON ‡≤∞‡≥Ä‡≤§‡≤ø ‡≤°‡≤ø‡≤ï‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø, `DisplayText` ‡≤ó‡≥Å‡≤£‡≤≤‡≤ï‡≥ç‡≤∑‡≤£‡≤µ‡≤®‡≥ç‡≤®‡≥Å `text` ‡≤µ‡≥ç‡≤Ø‡≤§‡≥ç‡≤Ø‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∏‡≥Ü‡≤ü‡≥ç ‡≤Æ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤á‡≤¶‡≥Å ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø ‡≤™‡≤†‡≥ç‡≤Ø ‡≤Ü‡≤ï‡≤æ‡≤∞ ‡≤ï‡≥ä‡≤°‡≥Å‡≤µ ‡≤Ü‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≥ç‡≤µ‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥ç‡≤¶‡≥Å.

    401 ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ ‡≤ï‡≥ã‡≤°‡≥ç ‡≤á‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü, ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤Ö‡≤µ‡≤ß‡≤ø ‡≤Æ‡≥Å‡≤ó‡≤ø‡≤¶‡≤ø‡≤¶‡≥Ü (‡≤à ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç‡≤ó‡≤≥‡≥Å 10 ‡≤®‡≤ø‡≤Æ‡≤ø‡≤∑‡≤ó‡≤≥‡≤∑‡≥ç‡≤ü‡≥á ‡≤á‡≤∞‡≥Å‡≤§‡≥ç‡≤§‡≤µ‡≥Ü). ‡≤á‡≤¶‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤π‡≥ä‡≤∏ ‡≤™‡≥ç‡≤∞‡≤µ‡≥á‡≤∂ ‡≤ü‡≥ã‡≤ï‡≤®‡≥ç ‡≤ï‡≥á‡≤≥‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Ü ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

    ‡≤á‡≤≤‡≥ç‡≤≤‡≤¶‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ü, ‡≤∏‡≤∞‡≤£‡≤ø ‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤®‡≤ø‡≤ü‡≤∞‡≥ç ‡≤ó‡≥Ü ‡≤¶‡≥ã‡≤∑ ‡≤∏‡≤Ç‡≤¶‡≥á‡≤∂ ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å `text` ‡≤ñ‡≤æ‡≤≤‡≤ø ‡≤á‡≤°‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.

1. ‡≤à ‡≤µ‡≤ø‡≤ß‡≤æ‡≤® ‡≤ï‡≥ä‡≤®‡≥Ü‡≤Ø‡≤≤‡≥ç‡≤≤‡≤ø HTTPClient ‡≤Æ‡≥Å‡≤ö‡≥ç‡≤ö‡≤ø ‡≤™‡≤†‡≥ç‡≤Ø‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ø‡≤Ç‡≤§‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø‡≤∏‡≥Å‡≤µ ‡≤ï‡≥Ü‡≤≥‡≤ó‡≤ø‡≤® ‡≤ï‡≥ã‡≤°‡≥ç ‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≤ø:

    ```cpp
    httpClient.end();

    return text;
    ```

1. `main.cpp` ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø `processAudio` ‡≤´‡≤Ç‡≤ï‡≥ç‡≤∑‡≤®‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤π‡≥ä‡≤∏ `convertSpeechToText` ‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø, ‡≤®‡≤Ç‡≤§‡≤∞ ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤∞‡≤£‡≤ø ‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤®‡≤ø‡≤ü‡≤∞‡≥ç ‡≤ó‡≥Ü ‡≤≤‡≤æ‡≤ó‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø:

    ```cpp
    String text = speechToText.convertSpeechToText();
    Serial.println(text);
    ```

1. ‡≤à ‡≤ï‡≥ã‡≤°‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å ‡≤ï‡≤ü‡≥ç‡≤ü‡≤ø‡≤∏‡≤ø, ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ Wio Terminal ‡≤ó‡≥Ü ‡≤Ö‡≤™‡≥ç‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≤∞‡≤£‡≤ø ‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤®‡≤ø‡≤ü‡≤∞‡≥ç ‡≤Æ‡≥Ç‡≤≤‡≤ï ‡≤™‡≤∞‡≥Ä‡≤ï‡≥ç‡≤∑‡≤ø‡≤∏‡≤ø. ‡≤∏‡≤∞‡≤£‡≤ø ‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤®‡≤ø‡≤ü‡≤∞‡≥ç ‡≤®‡≤≤‡≥ç‡≤≤‡≤ø `Ready` ‡≤ï‡≤æ‡≤£‡≤ø‡≤∏‡≤ø‡≤ï‡≥ä‡≤Ç‡≤° ‡≤Æ‡≥á‡≤≤‡≥Ü C ‡≤¨‡≤ü‡≤®‡≥ç (‡≤é‡≤° ‡≤¨‡≤¶‡≤ø‡≤Ø, ‡≤µ‡≤ø‡≤¶‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç ‡≤∏‡≥ç‡≤µ‡≤ø‡≤ö‡≥ç ‡≤ó‡≥Ü ‡≤π‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤¶ ‡≤¨‡≤ü‡≤®‡≥ç) ‡≤í‡≤§‡≥ç‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤®‡≥Å‡≤°‡≤ø‡≤Ø‡≤ø‡≤∞‡≤ø. 4 ‡≤∏‡≥Ü‡≤ï‡≤Ç‡≤°‡≥Å‡≤ó‡≤≥ ‡≤ß‡≥ç‡≤µ‡≤®‡≤ø ‡≤π‡≤ø‡≤°‡≤ø‡≤¶‡≥Å ‡≤é‡≤≤‡≥ç‡≤≤‡≤®‡≥Å ‡≤™‡≤†‡≥ç‡≤Ø‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤™‡≤∞‡≤ø‡≤µ‡≤∞‡≥ç‡≤§‡≤ø‡≤∏‡≤≤‡≤ø‡≤¶‡≥Ü.

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Got access token.
    Ready.
    Starting recording...
    Finished recording
    Sending speech...
    Speech sent!
    {"RecognitionStatus":"Success","DisplayText":"Set a 2 minute and 27 second timer.","Offset":4700000,"Duration":35300000}
    Set a 2 minute and 27 second timer.
    ```

> üíÅ ‡≤à ‡≤ï‡≥ã‡≤°‡≥ç ‡≤Ö‡≤®‡≥ç‡≤®‡≥Å [code-speech-to-text/wio-terminal](../../../../../6-consumer/lessons/1-speech-recognition/code-speech-to-text/wio-terminal) ‡≤´‡≥ã‡≤≤‡≥ç‡≤°‡≤∞‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤ï‡≤æ‡≤£‡≤¨‡≤π‡≥Å‡≤¶‡≥Å.

üòÄ ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∏‡≥ç‡≤™‡≥Ä‡≤ö‡≥ç ‡≤ü‡≥Å ‡≤ü‡≥Ü‡≤ï‡≥ç‡≤∏‡≥ç‡≤ü‡≥ç ‡≤™‡≥ç‡≤∞‡≥ã‡≤ó‡≥ç‡≤∞‡≤æ‡≤Ç ‡≤Ø‡≤∂‡≤∏‡≥ç‡≤µ‡≤ø‡≤Ø‡≤æ‡≤Ø‡≤ø‡≤§‡≥Å!

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**‡≤Ö‡≤µ‡≤ó‡≤æ‡≤π‡≤®**:
‡≤à ‡≤¶‡≤∏‡≥ç‡≤§‡≤æ‡≤µ‡≥á‡≤ú‡≥Å AI ‡≤≠‡≤æ‡≤∑‡≤æ‡≤Ç‡≤§‡≤∞ ‡≤∏‡≥á‡≤µ‡≥Ü [Co-op Translator](https://github.com/Azure/co-op-translator) ‡≤¨‡≤≥‡≤∏‡≤ø ‡≤Ö‡≤®‡≥Å‡≤µ‡≤æ‡≤¶‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤®‡≤æ‡≤µ‡≥Å ‡≤∂‡≥Å‡≤¶‡≥ç‡≤¶‡≤§‡≥Ü‡≤Ø ‡≤™‡≥ç‡≤∞‡≤Ø‡≤§‡≥ç‡≤®‡≤µ‡≤æ‡≤°‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤∞‡≥Ç ‡≤∏‡≤π, ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§ ‡≤≠‡≤æ‡≤∑‡≤æ‡≤Ç‡≤§‡≤∞‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¶‡≥ã‡≤∑‡≤ó‡≤≥‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤§‡≤™‡≥ç‡≤™‡≥Å‡≤ó‡≤≥‡≥Å ‡≤á‡≤∞‡≤¨‡≤π‡≥Å‡≤¶‡≥Å ‡≤é‡≤Ç‡≤¶‡≥Å ‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤ó‡≤Æ‡≤®‡≤ø‡≤∏‡≤ø‡≤∞‡≤ø. ‡≤Æ‡≥Ç‡≤≤ ‡≤≠‡≤æ‡≤∑‡≥Ü‡≤Ø ‡≤¶‡≤∏‡≥ç‡≤§‡≤æ‡≤µ‡≥á‡≤ú‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≥ç‡≤∞‡≤æ‡≤ß‡≤æ‡≤®‡≥ç‡≤Ø‡≤¶ ‡≤Æ‡≥Ç‡≤≤‡≤µ‡≥Ü‡≤Ç‡≤¶‡≥Å ‡≤™‡≤∞‡≤ø‡≤ó‡≤£‡≤ø‡≤∏‡≤¨‡≥á‡≤ï‡≥Å. ‡≤Æ‡≤π‡≤§‡≥ç‡≤µ‡≤¶ ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø‡≤ó‡≤æ‡≤ó‡≤ø, ‡≤µ‡≥É‡≤§‡≥ç‡≤§‡≤ø‡≤™‡≤∞ ‡≤Æ‡≤æ‡≤®‡≤µ ‡≤≠‡≤æ‡≤∑‡≤æ‡≤Ç‡≤§‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤â‡≤™‡≤Ø‡≥ã‡≤ó‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å ‡≤∂‡≤ø‡≤´‡≤æ‡≤∞‡≤∏‡≥Å ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤à ‡≤≠‡≤æ‡≤∑‡≤æ‡≤Ç‡≤§‡≤∞ ‡≤¨‡≤≥‡≤ï‡≥Ü‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤â‡≤Ç‡≤ü‡≤æ‡≤ó‡≥Å‡≤µ ‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤§‡≤™‡≥ç‡≤™‡≥Å ‡≤Ö‡≤∞‡≤ø‡≤µ‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤¶‡≥Å‡≤∞‡≥ç‡≤¨‡≥Å‡≤¶‡≥ç‡≤ß‡≤ø‡≤ó‡≥Ü ‡≤®‡≤æ‡≤µ‡≥Å ‡≤ú‡≤µ‡≤æ‡≤¨‡≥ç‡≤¶‡≤æ‡≤∞‡≤ø‡≤π‡≥ä‡≤Ç‡≤¶‡≥Å‡≤µ‡≥Å‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->