# ‡∞Æ‡±Ä ‡∞®‡±à‡∞ü‡±ç‚Äå‡∞≤‡±à‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞á‡∞Ç‡∞ü‡∞∞‡±ç‡∞®‡±Ü‡∞ü‡±ç ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞®‡∞ø‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø - ‡∞µ‡∞∞‡±ç‡∞ö‡±Å‡∞µ‡∞≤‡±ç IoT ‡∞π‡∞æ‡∞∞‡±ç‡∞°‡±ç‚Äå‡∞µ‡±á‡∞∞‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∞‡±Ü‡∞∏‡±ç‡∞™‡±ç‡∞¨‡±Ü‡∞∞‡±ç‡∞∞‡±Ä ‡∞™‡±à

‡∞à ‡∞™‡∞æ‡∞†‡∞Ç‡∞≤‡±ã, ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞Æ‡±Ä ‡∞∞‡±Ü‡∞∏‡±ç‡∞™‡±ç‡∞¨‡±Ü‡∞∞‡±ç‡∞∞‡±Ä ‡∞™‡±à ‡∞≤‡±á‡∞¶‡∞æ ‡∞µ‡∞∞‡±ç‡∞ö‡±Å‡∞µ‡∞≤‡±ç IoT ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞≤‡±à‡∞ü‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø‡∞≤ telemetry‡∞®‡∞ø MQTT ‡∞¨‡±ç‡∞∞‡±ã‡∞ï‡∞∞‡±ç‚Äå‡∞ï‡±Å ‡∞™‡∞Ç‡∞™‡∞ø‡∞∏‡±ç‡∞§‡∞æ‡∞∞‡±Å.

## ‡∞Æ‡±Ä‡∞ü‡±ç‡∞∞‡∞ø‡∞ï‡±ç‡∞∏‡±ç ‡∞™‡±ç‡∞∞‡∞ö‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø

‡∞§‡∞∞‡±Å‡∞µ‡∞æ‡∞§‡∞ø ‡∞¶‡∞∂‡∞≤‡±ã, ‡∞Æ‡±Ä‡∞ü‡±ç‡∞∞‡∞ø‡∞ï‡±ç‡∞∏‡±ç‚Äå‡∞§‡±ã JSON ‡∞°‡∞æ‡∞ï‡±ç‡∞Ø‡±Å‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞¶‡∞æ‡∞®‡±ç‡∞®‡∞ø MQTT ‡∞¨‡±ç‡∞∞‡±ã‡∞ï‡∞∞‡±ç‚Äå‡∞ï‡±Å ‡∞™‡∞Ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ø.

### ‡∞™‡∞®‡∞ø

‡∞Æ‡±Ä‡∞ü‡±ç‡∞∞‡∞ø‡∞ï‡±ç‡∞∏‡±ç‚Äå‡∞®‡±Å MQTT ‡∞¨‡±ç‡∞∞‡±ã‡∞ï‡∞∞‡±ç‚Äå‡∞ï‡±Å ‡∞™‡±ç‡∞∞‡∞ö‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.

1. VS ‡∞ï‡±ã‡∞°‡±ç‚Äå‡∞≤‡±ã ‡∞®‡±à‡∞ü‡±ç‚Äå‡∞≤‡±à‡∞ü‡±ç ‡∞™‡±ç‡∞∞‡∞æ‡∞ú‡±Ü‡∞ï‡±ç‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞§‡±Ü‡∞∞‡∞µ‡∞Ç‡∞°‡∞ø.

1. ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡∞∞‡±ç‡∞ö‡±Å‡∞µ‡∞≤‡±ç IoT ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞ü‡±ç‡∞≤‡∞Ø‡∞ø‡∞§‡±á, ‡∞ü‡±Ü‡∞∞‡±ç‡∞Æ‡∞ø‡∞®‡∞≤‡±ç ‡∞µ‡∞∞‡±ç‡∞ö‡±Å‡∞µ‡∞≤‡±ç ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞®‡∞°‡±Å‡∞™‡±Å‡∞§‡±Å‡∞®‡±ç‡∞®‡∞¶‡∞®‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞∞‡±Ü‡∞∏‡±ç‡∞™‡±ç‡∞¨‡±Ü‡∞∞‡±ç‡∞∞‡±Ä ‡∞™‡±à ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞ü‡±ç‡∞≤‡∞Ø‡∞ø‡∞§‡±á, ‡∞µ‡∞∞‡±ç‡∞ö‡±Å‡∞µ‡∞≤‡±ç ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞∞‡±Å.

1. `app.py` ‡∞´‡±à‡∞≤‡±ç ‡∞ü‡∞æ‡∞™‡±ç‚Äå‡∞≤‡±ã ‡∞ï‡±ç‡∞∞‡∞ø‡∞Ç‡∞¶‡∞ø ‡∞¶‡∞ø‡∞ó‡±Å‡∞Æ‡∞§‡∞ø‡∞®‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø:

    ```python
    import json
    ```

    `json` ‡∞≤‡±à‡∞¨‡±ç‡∞∞‡∞∞‡±Ä ‡∞Æ‡±Ä‡∞ü‡±ç‡∞∞‡∞ø‡∞ï‡±ç‡∞∏‡±ç‚Äå‡∞®‡∞ø JSON ‡∞°‡∞æ‡∞ï‡±ç‡∞Ø‡±Å‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞ó‡∞æ ‡∞é‡∞Ç‡∞ï‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡∞æ‡∞∞‡±Å.

1. `client_name` ‡¶ò‡ßã‡¶∑‡∞£ ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‡∞ï‡±ç‡∞∞‡∞ø‡∞Ç‡∞¶‡∞ø‡∞µ‡∞ø ‡∞ú‡±ã‡∞°‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø:

    ```python
    client_telemetry_topic = id + '/telemetry'
    ```

    `client_telemetry_topic` ‡∞Ö‡∞®‡±á‡∞¶‡∞ø ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞≤‡±à‡∞ü‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø‡∞≤‡∞®‡±Å ‡∞™‡±ç‡∞∞‡∞ö‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡±á MQTT ‡∞ü‡∞æ‡∞™‡∞ø‡∞ï‡±ç.

1. ‡∞´‡±à‡∞≤‡±ç ‡∞ö‡∞ø‡∞µ‡∞∞‡∞≤‡±ã‡∞®‡∞ø `while True:` ‡∞≤‡±Ç‡∞™‡±ç ‡∞â‡∞®‡±ç‡∞®‡∞æ‡∞Ø‡∞ø ‡∞µ‡∞æ‡∞ü‡∞ø‡∞®‡∞ø ‡∞ï‡±ç‡∞∞‡∞ø‡∞Ç‡∞¶‡∞ø‡∞µ‡∞ø ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞Ç‡∞°‡∞ø:

    ```python
    while True:
        light = light_sensor.light
        telemetry = json.dumps({'light' : light})

        print("Sending telemetry ", telemetry)
    
        mqtt_client.publish(client_telemetry_topic, telemetry)
    
        time.sleep(5)
    ```

    ‡∞à ‡∞ï‡±ã‡∞°‡±ç ‡∞≤‡±à‡∞ü‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø‡∞®‡∞ø JSON ‡∞°‡∞æ‡∞ï‡±ç‡∞Ø‡±Å‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞ó‡∞æ ‡∞™‡±ç‡∞Ø‡∞æ‡∞ï‡±á‡∞ú‡±ç ‡∞ö‡±á‡∞∏‡∞ø MQTT ‡∞¨‡±ç‡∞∞‡±ã‡∞ï‡∞∞‡±ç‚Äå‡∞ï‡±Å ‡∞™‡±ç‡∞∞‡∞ö‡±Å‡∞∞‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø. ‡∞§‡∞∞‡±Å‡∞µ‡∞æ‡∞§ ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞æ‡∞≤‡±Å ‡∞™‡∞Ç‡∞™‡∞ø‡∞Ç‡∞ö‡±á ‡∞™‡∞≤‡±Å‡∞∏‡∞æ‡∞∞‡±ç‡∞≤‡±Å ‡∞§‡∞ó‡±ç‡∞ó‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞®‡∞ø‡∞¶‡±ç‡∞∞‡∞™‡±ã‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.

1. ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å‡∞ó‡∞æ ‡∞®‡∞°‡∞ø‡∞™‡∞ø‡∞® ‡∞µ‡∞ø‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞ï‡±ã‡∞°‡±ç ‡∞®‡∞°‡∞™‡∞Ç‡∞°‡∞ø. ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡∞∞‡±ç‡∞ö‡±Å‡∞µ‡∞≤‡±ç IoT ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞ü‡±á, CounterFit ‡∞Ø‡∞æ‡∞™‡±ç ‡∞®‡∞°‡±Å‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞≤‡±à‡∞ü‡±ç ‡∞∏‡±Ü‡∞®‡±ç‡∞∏‡∞æ‡∞∞‡±ç, LED ‡∞∏‡∞∞‡±à‡∞® ‡∞™‡∞ø‡∞®‡±ç‚Äå‡∞≤‡∞™‡±à ‡∞∏‡±É‡∞∑‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞®‡∞ø ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø.

    ```output
    (.venv) ‚ûú  nightlight python app.py 
    MQTT connected!
    Sending telemetry  {"light": 0}
    Sending telemetry  {"light": 0}
    ```

> üíÅ ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞à ‡∞ï‡±ã‡∞°‡±ç‚Äå‡∞®‡±Å [code-telemetry/virtual-device](../../../../../1-getting-started/lessons/4-connect-internet/code-telemetry/virtual-device) ‡∞´‡±ã‡∞≤‡±ç‡∞°‡∞∞‡±ç ‡∞≤‡±á‡∞¶‡∞æ [code-telemetry/pi](../../../../../1-getting-started/lessons/4-connect-internet/code-telemetry/pi) ‡∞´‡±ã‡∞≤‡±ç‡∞°‡∞∞‡±ç‚Äå‡∞≤‡±ã ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞µ‡∞ö‡±ç‡∞ö‡±Å.

üòÄ ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡∞ø‡∞ú‡∞Ø‡∞µ‡∞Ç‡∞§‡∞Ç‡∞ó‡∞æ ‡∞Æ‡±Ä ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞Æ‡±Ä‡∞ü‡±ç‡∞∞‡∞ø‡∞ï‡±ç‡∞∏‡±ç ‡∞™‡∞Ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞æ‡∞∞‡±Å.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
**‡∞µ‡∞ø‡∞Æ‡∞∞‡±ç‡∞∂‡∞®**:  
‡∞à ‡∞°‡∞æ‡∞ï‡±ç‡∞Ø‡±Å‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞®‡±Å AI ‡∞Ö‡∞®‡±Å‡∞µ‡∞æ‡∞¶ ‡∞∏‡±á‡∞µ [Co-op Translator](https://github.com/Azure/co-op-translator) ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Ö‡∞®‡±Å‡∞µ‡∞¶‡∞ø‡∞Ç‡∞ö‡∞æ‡∞Ç. ‡∞Æ‡±á‡∞Æ‡±Å ‡∞ñ‡∞ö‡±ç‡∞ö‡∞ø‡∞§‡∞§‡±ç‡∞µ‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞™‡±ç‡∞∞‡∞Ø‡∞§‡±ç‡∞®‡∞ø‡∞Ç‡∞ö‡∞ø‡∞®‡∞æ, ‡∞Ü‡∞ü‡±ã‡∞Æ‡±á‡∞ü‡±Ü‡∞°‡±ç ‡∞Ö‡∞®‡±Å‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±ç‡∞≤‡±ã ‡∞™‡±ä‡∞∞‡∞™‡∞æ‡∞ü‡±ç‡∞≤‡±Å ‡∞≤‡±á‡∞¶‡∞æ ‡∞§‡∞™‡±ç‡∞™‡∞ø‡∞¶‡∞æ‡∞≤‡±Å ‡∞â‡∞Ç‡∞°‡∞µ‡∞ö‡±ç‡∞ö‡±Å. ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞≠‡∞æ‡∞∑‡∞≤‡±ã ‡∞â‡∞®‡±ç‡∞® ‡∞Ö‡∞∏‡∞≤‡±Å ‡∞°‡∞æ‡∞ï‡±ç‡∞Ø‡±Å‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞Ö‡∞ß‡∞ø‡∞ï‡∞æ‡∞∞‡∞ø‡∞ï ‡∞Æ‡±Ç‡∞≤‡∞Ç‡∞ó‡∞æ ‡∞™‡∞∞‡∞ø‡∞ó‡∞£‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ø. ‡∞ï‡±Ä‡∞≤‡∞ï ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞ï‡±ã‡∞∏‡∞Ç, ‡∞™‡±ç‡∞∞‡±ä‡∞´‡±Ü‡∞∑‡∞®‡∞≤‡±ç ‡∞Æ‡∞æ‡∞®‡∞µ ‡∞Ö‡∞®‡±Å‡∞µ‡∞æ‡∞¶‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞∏‡±Ç‡∞ö‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø. ‡∞à ‡∞Ö‡∞®‡±Å‡∞µ‡∞æ‡∞¶‡∞Ç ‡∞µ‡∞æ‡∞°‡∞ï‡∞Ç ‡∞µ‡∞≤‡±ç‡∞≤ ‡∞ú‡∞∞‡∞ø‡∞ó‡±á ‡∞è‡∞µ‡±à‡∞®‡∞æ ‡∞§‡∞™‡±ç‡∞™‡±Å‡∞¶‡±ã‡∞µ‡∞≤‡±Å ‡∞≤‡±á‡∞¶‡∞æ ‡∞§‡∞™‡±ç‡∞™‡±Å‡∞ó‡∞æ ‡∞Ö‡∞∞‡±ç‡∞•‡∞Ç ‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç‡∞™‡±à ‡∞Æ‡±á‡∞Æ‡±Å ‡∞¨‡∞æ‡∞ß‡±ç‡∞Ø‡∞§ ‡∞µ‡∞π‡∞ø‡∞Ç‡∞ö‡∞Æ‡±Å.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->